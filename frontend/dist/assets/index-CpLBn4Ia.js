import{j as e,r as l,R as ht,a as Ye,u as He,Q as gt,b as ft}from"./api-eZya7Rlk.js";import{a as Ke,g as mt}from"./vendor-DavUf6mE.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();var de={},_e;function bt(){if(_e)return de;_e=1;var t=Ke();return de.createRoot=t.createRoot,de.hydrateRoot=t.hydrateRoot,de}var yt=bt();const vt=mt(yt),Qe="http://localhost:3001/".replace(/\/$/,"");async function C(t,{method:o="GET",token:s,body:r}={}){const a=t.startsWith("http")?t:`${Qe}${t.startsWith("/")?"":"/"}${t}`,n={};r instanceof FormData||(n["Content-Type"]="application/json"),s&&(n.Authorization=`Bearer ${s}`);const i={method:o,headers:n};r instanceof FormData?i.body=r:r&&(i.body=JSON.stringify(r));try{const d=await fetch(a,i);if(!d.ok){let h=`Erro ${d.status}: ${d.statusText}`;try{const p=await d.json();h=p.message||p.error||h,console.error("❌ API Error Details:",p)}catch(p){console.error("❌ Erro ao interpretar resposta de erro:",p)}throw new Error(h)}return d.status===204?null:await d.json()}catch(d){throw console.error("❌ API Request Failed:",{url:a,error:d.message}),d}}async function jt(t,o){t.has&&t.has("token")&&t.delete("token");const s="/api/arquivos/upload",r=s.startsWith("http")?s:`${Qe}${s.startsWith("/")?"":"/"}${s}`,a=await fetch(r,{method:"POST",body:t,headers:{Authorization:`Bearer ${o}`}});if(!a.ok){let n=`Erro ${a.status}: ${a.statusText}`;try{const i=await a.json();n=i.message||i.error||n}catch(i){console.error("Erro ao interpretar resposta:",i)}throw new Error(n)}return await a.json()}const ne={login:async(t,o)=>await C("/auth/login",{method:"POST",body:{email:t,senha:o}}),register:async(t,o,s,r=2)=>await C("/auth/registrar",{method:"POST",body:{nome:t,email:o,senha:s,role_id:r}}),forgotPassword:async t=>await C("/auth/esqueci-senha",{method:"POST",body:{email:t}}),resetPassword:async(t,o)=>await C("/auth/redefinir-senha",{method:"POST",body:{novaSenha:o},token:t}),getProfile:async t=>await C("/auth/perfil",{method:"GET",token:t}),refreshToken:async t=>await C("/auth/refresh",{method:"POST",body:{refreshToken:t}})},J={listUsers:async(t,o="",s=1)=>await C(`/api/usuarios/pagina?search=${o}&page=${s}`,{method:"GET",token:t}),getUsersForAssignment:async(t,o="",s=1)=>await C(`/api/usuarios/vincular?search=${o}&page=${s}`,{method:"GET",token:t}),getUsersByRole:async(t,o)=>await C(`/api/usuarios/role/${o}`,{method:"GET",token:t}),getUserById:async(t,o)=>await C(`/api/usuarios/${o}`,{method:"GET",token:t}),createUser:async(t,o)=>await C("/api/usuarios",{method:"POST",token:t,body:o}),updateUser:async(t,o,s)=>await C(`/api/usuarios/${o}`,{method:"PUT",token:t,body:s}),updatePassword:async(t,o,s)=>await C(`/api/usuarios/${o}/senha`,{method:"PUT",token:t,body:{senha:s}}),softDeleteUser:async(t,o)=>await C(`/api/usuarios/${o}`,{method:"DELETE",token:t}),reactivateUser:async(t,o)=>await C(`/api/usuarios/${o}/reativar`,{method:"PUT",token:t}),getAllUsers:async(t,o="",s=1)=>{const r=new URLSearchParams({search:o,page:s}).toString();return await C(`/api/usuarios?${r}`,{method:"GET",token:t})},getStudents:async(t,o="",s=1)=>{const r=new URLSearchParams({search:o,page:s}).toString();return await C(`/api/usuarios/alunos?${r}`,{method:"GET",token:t})},deleteUser:async(t,o)=>await C(`/api/usuarios/${o}`,{method:"DELETE",token:t})},ge={createProcess:async(t,o)=>await C("/api/processos/novo",{method:"POST",token:t,body:o}),listProcesses:async t=>await C("/api/processos",{method:"GET",token:t}),getAllProcesses:async t=>await C("/api/processos",{method:"GET",token:t}),searchProcesses:async(t,o={})=>{const s=new URLSearchParams(o).toString();return await C(`/api/processos/buscar?${s}`,{method:"GET",token:t})},getMyProcesses:async t=>await C("/api/processos/meus-processos",{method:"GET",token:t}),updateProcess:async(t,o,s)=>await C(`/api/processos/${o}`,{method:"PATCH",token:t,body:s}),getProcessUsers:async(t,o,s=1,r=10)=>await C(`/api/processos/${o}/usuarios?pagina=${s}&porPagina=${r}`,{method:"GET",token:t}),assignUserToProcess:async(t,o,s,r)=>await C("/api/processos/vincular-usuario",{method:"POST",token:t,body:{processo_id:o,usuario_id:s,role:r}}),removeUserFromProcess:async(t,o,s)=>await C("/api/processos/remover-usuario",{method:"DELETE",token:t,body:{processo_id:o,usuario_id:s}}),addProcessUpdate:async(t,o,s)=>await C(`/api/processos/${o}/atualizacoes`,{method:"POST",token:t,body:s}),removeProcessUpdate:async(t,o,s)=>await C(`/api/processos/${o}/atualizacoes/${s}`,{method:"DELETE",token:t})},U={getMateriaAssunto:async t=>await C("/api/aux/materia-assunto",{method:"GET",token:t}),createMateriaAssunto:async(t,o)=>await C("/api/aux/materia-assunto",{method:"POST",token:t,body:{nome:o}}),getFase:async t=>await C("/api/aux/fase",{method:"GET",token:t}),createFase:async(t,o)=>await C("/api/aux/fase",{method:"POST",token:t,body:{nome:o}}),getDiligencia:async t=>await C("/api/aux/diligencia",{method:"GET",token:t}),createDiligencia:async(t,o)=>await C("/api/aux/diligencia",{method:"POST",token:t,body:{nome:o}}),getLocalTramitacao:async t=>await C("/api/aux/local-tramitacao",{method:"GET",token:t}),createLocalTramitacao:async(t,o)=>await C("/api/aux/local-tramitacao",{method:"POST",token:t,body:{nome:o}})},ue={uploadFile:async(t,o)=>await jt(t,o),getProcessFiles:async(t,o)=>await C(`/api/arquivos/processo/${o}`,{method:"GET",token:t}),getUserFiles:async(t,o)=>await C(`/api/arquivos/usuario/${o}`,{method:"GET",token:t}),attachFileToProcess:async(t,o,s)=>await C("/api/arquivos/anexar",{method:"POST",token:t,body:{processo_id:o,arquivo_id:s}}),deleteFile:async(t,o)=>await C(`/api/arquivos/${t}`,{method:"DELETE",token:o}),unlinkFileFromProcess:async(t,o)=>await C(`/api/arquivos/desvincular/${t}`,{method:"PUT",token:o})},ve={getProcessUpdates:async(t,o)=>await C(`/api/atualizacoes/${o}`,{method:"GET",token:t}),createProcessUpdate:async(t,o)=>await C("/api/atualizacoes",{method:"POST",token:t,body:o}),deleteProcessUpdate:async(t,o,s)=>await C(`/api/atualizacoes/${t}/atualizacoes/${o}`,{method:"DELETE",token:s})},ce={listAgendamentos:async t=>await C("/api/agendamentos",{method:"GET",token:t}),getAgendamentoById:async(t,o)=>await C(`/api/agendamentos/${o}`,{method:"GET",token:t}),createAgendamento:async(t,o)=>await C("/api/agendamentos",{method:"POST",token:t,body:o}),updateAgendamento:async(t,o,s)=>await C(`/api/agendamentos/${o}`,{method:"PUT",token:t,body:s}),deleteAgendamento:async(t,o)=>await C(`/api/agendamentos/${o}`,{method:"DELETE",token:t}),getCalendarioAgendamentos:async(t,o,s)=>await C(`/api/agendamentos/calendario/${o}/${s}`,{method:"GET",token:t}),getAllAgendamentos:async t=>await C("/api/agendamentos/admin/todos",{method:"GET",token:t}),getEstatisticas:async t=>await C("/api/agendamentos/stats/resumo",{method:"GET",token:t})};function Z({size:t=48,text:o="Carregando..."}){return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:16},children:[e.jsx("div",{style:{border:"4px solid #eee",borderTop:"4px solid #007bff",borderRadius:"50%",width:t,height:t,animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"@keyframes spin { 100% { transform: rotate(360deg); } }"}),e.jsx("div",{style:{marginTop:12,color:"#555"},children:o})]})}const Xe=l.createContext();function St({children:t}){const[o,s]=l.useState(()=>{const b=localStorage.getItem("user"),g=b?JSON.parse(b):null;return g&&!window.userLoggedOnce&&(window.userLoggedOnce=!0),g}),[r,a]=l.useState(()=>localStorage.getItem("token")||""),[n,i]=l.useState(()=>localStorage.getItem("refreshToken")||""),[d,c]=l.useState(!1);l.useEffect(()=>{o&&r?(localStorage.setItem("user",JSON.stringify(o)),localStorage.setItem("token",r),n&&localStorage.setItem("refreshToken",n)):(localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"))},[o,r,n]),l.useEffect(()=>{(async()=>{if(r&&!o)try{c(!0);const g=await ne.getProfile(r);s(g)}catch(g){console.error("Token inválido:",g),y()}finally{c(!1)}else!r&&!o&&c(!1)})()},[r]);const h=async(b,g)=>{c(!0);try{const m=await ne.login(b,g);return m.success?(s(m.usuario),a(m.token),i(m.refreshToken),c(!1),{success:!0}):(c(!1),{success:!1,message:m.message||"Erro ao fazer login"})}catch(m){return c(!1),{success:!1,message:m.message||"Erro ao fazer login"}}},p=async()=>{if(!n)return!1;try{const b=await ne.refreshToken(n);return b.token?(a(b.token),localStorage.setItem("token",b.token),!0):!1}catch{return y(),!1}},u=async(b,g,m,v=2)=>{c(!0);try{return await ne.register(b,g,m,v),c(!1),{success:!0}}catch(k){return c(!1),{success:!1,message:k.message||"Erro ao registrar"}}},x=async b=>{c(!0);try{return await ne.forgotPassword(b),c(!1),{success:!0}}catch(g){return c(!1),{success:!1,message:g.message||"Erro ao solicitar recuperação"}}},y=()=>{s(null),a(""),i(""),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken")};if(d)return e.jsx(Z,{text:"Verificando autenticação..."});const S=async(b,...g)=>{try{return await b(r,...g)}catch(m){if(m.message&&m.message.toLowerCase().includes("401")){if(await p())return await b(localStorage.getItem("token"),...g);throw m}else throw m}};return e.jsx(Xe.Provider,{value:{user:o,setUser:s,token:r,refreshToken:n,login:h,register:u,forgotPassword:x,logout:y,loading:d,isAuthenticated:!!o,fetchWithAuth:S},children:t})}function N(){return l.useContext(Xe)}Ke();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},ie.apply(this,arguments)}var Y;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Y||(Y={}));const Be="popstate";function Ct(t){t===void 0&&(t={});function o(r,a){let{pathname:n,search:i,hash:d}=r.location;return je("",{pathname:n,search:i,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:pe(a)}return kt(o,s,null,t)}function L(t,o){if(t===!1||t===null||typeof t>"u")throw new Error(o)}function Ze(t,o){if(!t){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function wt(){return Math.random().toString(36).substr(2,8)}function Fe(t,o){return{usr:t.state,key:t.key,idx:o}}function je(t,o,s,r){return s===void 0&&(s=null),ie({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof o=="string"?re(o):o,{state:s,key:o&&o.key||r||wt()})}function pe(t){let{pathname:o="/",search:s="",hash:r=""}=t;return s&&s!=="?"&&(o+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(o+=r.charAt(0)==="#"?r:"#"+r),o}function re(t){let o={};if(t){let s=t.indexOf("#");s>=0&&(o.hash=t.substr(s),t=t.substr(0,s));let r=t.indexOf("?");r>=0&&(o.search=t.substr(r),t=t.substr(0,r)),t&&(o.pathname=t)}return o}function kt(t,o,s,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:n=!1}=r,i=a.history,d=Y.Pop,c=null,h=p();h==null&&(h=0,i.replaceState(ie({},i.state,{idx:h}),""));function p(){return(i.state||{idx:null}).idx}function u(){d=Y.Pop;let g=p(),m=g==null?null:g-h;h=g,c&&c({action:d,location:b.location,delta:m})}function x(g,m){d=Y.Push;let v=je(b.location,g,m);h=p()+1;let k=Fe(v,h),A=b.createHref(v);try{i.pushState(k,"",A)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(A)}n&&c&&c({action:d,location:b.location,delta:1})}function y(g,m){d=Y.Replace;let v=je(b.location,g,m);h=p();let k=Fe(v,h),A=b.createHref(v);i.replaceState(k,"",A),n&&c&&c({action:d,location:b.location,delta:0})}function S(g){let m=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof g=="string"?g:pe(g);return v=v.replace(/ $/,"%20"),L(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let b={get action(){return d},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Be,u),c=g,()=>{a.removeEventListener(Be,u),c=null}},createHref(g){return o(a,g)},createURL:S,encodeLocation(g){let m=S(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:x,replace:y,go(g){return i.go(g)}};return b}var Me;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Me||(Me={}));function Pt(t,o,s){return s===void 0&&(s="/"),At(t,o,s)}function At(t,o,s,r){let a=typeof o=="string"?re(o):o,n=ze(a.pathname||"/",s);if(n==null)return null;let i=et(t);zt(i);let d=null;for(let c=0;d==null&&c<i.length;++c){let h=Dt(n);d=Lt(i[c],h)}return d}function et(t,o,s,r){o===void 0&&(o=[]),s===void 0&&(s=[]),r===void 0&&(r="");let a=(n,i,d)=>{let c={relativePath:d===void 0?n.path||"":d,caseSensitive:n.caseSensitive===!0,childrenIndex:i,route:n};c.relativePath.startsWith("/")&&(L(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=K([r,c.relativePath]),p=s.concat(c);n.children&&n.children.length>0&&(L(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),et(n.children,o,p,h)),!(n.path==null&&!n.index)&&o.push({path:h,score:Ft(h,n.index),routesMeta:p})};return t.forEach((n,i)=>{var d;if(n.path===""||!((d=n.path)!=null&&d.includes("?")))a(n,i);else for(let c of tt(n.path))a(n,i,c)}),o}function tt(t){let o=t.split("/");if(o.length===0)return[];let[s,...r]=o,a=s.endsWith("?"),n=s.replace(/\?$/,"");if(r.length===0)return a?[n,""]:[n];let i=tt(r.join("/")),d=[];return d.push(...i.map(c=>c===""?n:[n,c].join("/"))),a&&d.push(...i),d.map(c=>t.startsWith("/")&&c===""?"/":c)}function zt(t){t.sort((o,s)=>o.score!==s.score?s.score-o.score:Mt(o.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const Et=/^:[\w-]+$/,Tt=3,Rt=2,Nt=1,_t=10,Bt=-2,Le=t=>t==="*";function Ft(t,o){let s=t.split("/"),r=s.length;return s.some(Le)&&(r+=Bt),o&&(r+=Rt),s.filter(a=>!Le(a)).reduce((a,n)=>a+(Et.test(n)?Tt:n===""?Nt:_t),r)}function Mt(t,o){return t.length===o.length&&t.slice(0,-1).every((r,a)=>r===o[a])?t[t.length-1]-o[o.length-1]:0}function Lt(t,o,s){let{routesMeta:r}=t,a={},n="/",i=[];for(let d=0;d<r.length;++d){let c=r[d],h=d===r.length-1,p=n==="/"?o:o.slice(n.length)||"/",u=Ut({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),x=c.route;if(!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:K([n,u.pathname]),pathnameBase:Ot(K([n,u.pathnameBase])),route:x}),u.pathnameBase!=="/"&&(n=K([n,u.pathnameBase]))}return i}function Ut(t,o){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=Wt(t.path,t.caseSensitive,t.end),a=o.match(s);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((h,p,u)=>{let{paramName:x,isOptional:y}=p;if(x==="*"){let b=d[u]||"";i=n.slice(0,n.length-b.length).replace(/(.)\/+$/,"$1")}const S=d[u];return y&&!S?h[x]=void 0:h[x]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:n,pathnameBase:i,pattern:t}}function Wt(t,o,s){o===void 0&&(o=!1),s===void 0&&(s=!0),Ze(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,d,c)=>(r.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,o?void 0:"i"),r]}function Dt(t){try{return t.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Ze(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),t}}function ze(t,o){if(o==="/")return t;if(!t.toLowerCase().startsWith(o.toLowerCase()))return null;let s=o.endsWith("/")?o.length-1:o.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function It(t,o){o===void 0&&(o="/");let{pathname:s,search:r="",hash:a=""}=typeof t=="string"?re(t):t;return{pathname:s?s.startsWith("/")?s:qt(s,o):o,search:Gt(r),hash:Vt(a)}}function qt(t,o){let s=o.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function be(t,o,s,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $t(t){return t.filter((o,s)=>s===0||o.route.path&&o.route.path.length>0)}function Ee(t,o){let s=$t(t);return o?s.map((r,a)=>a===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function Te(t,o,s,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=re(t):(a=ie({},t),L(!a.pathname||!a.pathname.includes("?"),be("?","pathname","search",a)),L(!a.pathname||!a.pathname.includes("#"),be("#","pathname","hash",a)),L(!a.search||!a.search.includes("#"),be("#","search","hash",a)));let n=t===""||a.pathname==="",i=n?"/":a.pathname,d;if(i==null)d=s;else{let u=o.length-1;if(!r&&i.startsWith("..")){let x=i.split("/");for(;x[0]==="..";)x.shift(),u-=1;a.pathname=x.join("/")}d=u>=0?o[u]:"/"}let c=It(a,d),h=i&&i!=="/"&&i.endsWith("/"),p=(n||i===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const K=t=>t.join("/").replace(/\/\/+/g,"/"),Ot=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gt=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vt=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Jt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ot=["post","put","patch","delete"];new Set(ot);const Yt=["get",...ot];new Set(Yt);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function le(){return le=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},le.apply(this,arguments)}const Re=l.createContext(null),Ht=l.createContext(null),Q=l.createContext(null),fe=l.createContext(null),V=l.createContext({outlet:null,matches:[],isDataRoute:!1}),rt=l.createContext(null);function Kt(t,o){let{relative:s}=o===void 0?{}:o;se()||L(!1);let{basename:r,navigator:a}=l.useContext(Q),{hash:n,pathname:i,search:d}=at(t,{relative:s}),c=i;return r!=="/"&&(c=i==="/"?r:K([r,i])),a.createHref({pathname:c,search:d,hash:n})}function se(){return l.useContext(fe)!=null}function ee(){return se()||L(!1),l.useContext(fe).location}function st(t){l.useContext(Q).static||l.useLayoutEffect(t)}function D(){let{isDataRoute:t}=l.useContext(V);return t?co():Qt()}function Qt(){se()||L(!1);let t=l.useContext(Re),{basename:o,future:s,navigator:r}=l.useContext(Q),{matches:a}=l.useContext(V),{pathname:n}=ee(),i=JSON.stringify(Ee(a,s.v7_relativeSplatPath)),d=l.useRef(!1);return st(()=>{d.current=!0}),l.useCallback(function(h,p){if(p===void 0&&(p={}),!d.current)return;if(typeof h=="number"){r.go(h);return}let u=Te(h,JSON.parse(i),n,p.relative==="path");t==null&&o!=="/"&&(u.pathname=u.pathname==="/"?o:K([o,u.pathname])),(p.replace?r.replace:r.push)(u,p.state,p)},[o,r,i,n,t])}function ae(){let{matches:t}=l.useContext(V),o=t[t.length-1];return o?o.params:{}}function at(t,o){let{relative:s}=o===void 0?{}:o,{future:r}=l.useContext(Q),{matches:a}=l.useContext(V),{pathname:n}=ee(),i=JSON.stringify(Ee(a,r.v7_relativeSplatPath));return l.useMemo(()=>Te(t,JSON.parse(i),n,s==="path"),[t,i,n,s])}function Xt(t,o){return Zt(t,o)}function Zt(t,o,s,r){se()||L(!1);let{navigator:a}=l.useContext(Q),{matches:n}=l.useContext(V),i=n[n.length-1],d=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let h=ee(),p;if(o){var u;let g=typeof o=="string"?re(o):o;c==="/"||(u=g.pathname)!=null&&u.startsWith(c)||L(!1),p=g}else p=h;let x=p.pathname||"/",y=x;if(c!=="/"){let g=c.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(g.length).join("/")}let S=Pt(t,{pathname:y}),b=so(S&&S.map(g=>Object.assign({},g,{params:Object.assign({},d,g.params),pathname:K([c,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:K([c,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),n,s,r);return o&&b?l.createElement(fe.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Y.Pop}},b):b}function eo(){let t=lo(),o=Jt(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},o),s?l.createElement("pre",{style:a},s):null,null)}const to=l.createElement(eo,null);class oo extends l.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,s){return s.location!==o.location||s.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:s.error,location:s.location,revalidation:o.revalidation||s.revalidation}}componentDidCatch(o,s){console.error("React Router caught the following error during render",o,s)}render(){return this.state.error!==void 0?l.createElement(V.Provider,{value:this.props.routeContext},l.createElement(rt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ro(t){let{routeContext:o,match:s,children:r}=t,a=l.useContext(Re);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),l.createElement(V.Provider,{value:o},r)}function so(t,o,s,r){var a;if(o===void 0&&(o=[]),s===void 0&&(s=null),r===void 0&&(r=null),t==null){var n;if(!s)return null;if(s.errors)t=s.matches;else if((n=r)!=null&&n.v7_partialHydration&&o.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let i=t,d=(a=s)==null?void 0:a.errors;if(d!=null){let p=i.findIndex(u=>u.route.id&&d?.[u.route.id]!==void 0);p>=0||L(!1),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,h=-1;if(s&&r&&r.v7_partialHydration)for(let p=0;p<i.length;p++){let u=i[p];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(h=p),u.route.id){let{loaderData:x,errors:y}=s,S=u.route.loader&&x[u.route.id]===void 0&&(!y||y[u.route.id]===void 0);if(u.route.lazy||S){c=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((p,u,x)=>{let y,S=!1,b=null,g=null;s&&(y=d&&u.route.id?d[u.route.id]:void 0,b=u.route.errorElement||to,c&&(h<0&&x===0?(uo("route-fallback"),S=!0,g=null):h===x&&(S=!0,g=u.route.hydrateFallbackElement||null)));let m=o.concat(i.slice(0,x+1)),v=()=>{let k;return y?k=b:S?k=g:u.route.Component?k=l.createElement(u.route.Component,null):u.route.element?k=u.route.element:k=p,l.createElement(ro,{match:u,routeContext:{outlet:p,matches:m,isDataRoute:s!=null},children:k})};return s&&(u.route.ErrorBoundary||u.route.errorElement||x===0)?l.createElement(oo,{location:s.location,revalidation:s.revalidation,component:b,error:y,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var nt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nt||{}),it=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(it||{});function ao(t){let o=l.useContext(Re);return o||L(!1),o}function no(t){let o=l.useContext(Ht);return o||L(!1),o}function io(t){let o=l.useContext(V);return o||L(!1),o}function lt(t){let o=io(),s=o.matches[o.matches.length-1];return s.route.id||L(!1),s.route.id}function lo(){var t;let o=l.useContext(rt),s=no(),r=lt();return o!==void 0?o:(t=s.errors)==null?void 0:t[r]}function co(){let{router:t}=ao(nt.UseNavigateStable),o=lt(it.UseNavigateStable),s=l.useRef(!1);return st(()=>{s.current=!0}),l.useCallback(function(a,n){n===void 0&&(n={}),s.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,le({fromRouteId:o},n)))},[t,o])}const Ue={};function uo(t,o,s){Ue[t]||(Ue[t]=!0)}function po(t,o){t?.v7_startTransition,t?.v7_relativeSplatPath}function We(t){let{to:o,replace:s,state:r,relative:a}=t;se()||L(!1);let{future:n,static:i}=l.useContext(Q),{matches:d}=l.useContext(V),{pathname:c}=ee(),h=D(),p=Te(o,Ee(d,n.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(p);return l.useEffect(()=>h(JSON.parse(u),{replace:s,state:r,relative:a}),[h,u,a,s,r]),null}function M(t){L(!1)}function xo(t){let{basename:o="/",children:s=null,location:r,navigationType:a=Y.Pop,navigator:n,static:i=!1,future:d}=t;se()&&L(!1);let c=o.replace(/^\/*/,"/"),h=l.useMemo(()=>({basename:c,navigator:n,static:i,future:le({v7_relativeSplatPath:!1},d)}),[c,d,n,i]);typeof r=="string"&&(r=re(r));let{pathname:p="/",search:u="",hash:x="",state:y=null,key:S="default"}=r,b=l.useMemo(()=>{let g=ze(p,c);return g==null?null:{location:{pathname:g,search:u,hash:x,state:y,key:S},navigationType:a}},[c,p,u,x,y,S,a]);return b==null?null:l.createElement(Q.Provider,{value:h},l.createElement(fe.Provider,{children:s,value:b}))}function ho(t){let{children:o,location:s}=t;return Xt(Se(o),s)}new Promise(()=>{});function Se(t,o){o===void 0&&(o=[]);let s=[];return l.Children.forEach(t,(r,a)=>{if(!l.isValidElement(r))return;let n=[...o,a];if(r.type===l.Fragment){s.push.apply(s,Se(r.props.children,n));return}r.type!==M&&L(!1),!r.props.index||!r.props.children||L(!1);let i={id:r.props.id||n.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Se(r.props.children,n)),s.push(i)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ce(){return Ce=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Ce.apply(this,arguments)}function go(t,o){if(t==null)return{};var s={},r=Object.keys(t),a,n;for(n=0;n<r.length;n++)a=r[n],!(o.indexOf(a)>=0)&&(s[a]=t[a]);return s}function fo(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mo(t,o){return t.button===0&&(!o||o==="_self")&&!fo(t)}function we(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((o,s)=>{let r=t[s];return o.concat(Array.isArray(r)?r.map(a=>[s,a]):[[s,r]])},[]))}function bo(t,o){let s=we(t);return o&&o.forEach((r,a)=>{s.has(a)||o.getAll(a).forEach(n=>{s.append(a,n)})}),s}const yo=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vo="6";try{window.__reactRouterVersion=vo}catch{}const jo="startTransition",De=ht[jo];function So(t){let{basename:o,children:s,future:r,window:a}=t,n=l.useRef();n.current==null&&(n.current=Ct({window:a,v5Compat:!0}));let i=n.current,[d,c]=l.useState({action:i.action,location:i.location}),{v7_startTransition:h}=r||{},p=l.useCallback(u=>{h&&De?De(()=>c(u)):c(u)},[c,h]);return l.useLayoutEffect(()=>i.listen(p),[i,p]),l.useEffect(()=>po(r),[r]),l.createElement(xo,{basename:o,children:s,location:d.location,navigationType:d.action,navigator:i,future:r})}const Co=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=l.forwardRef(function(o,s){let{onClick:r,relative:a,reloadDocument:n,replace:i,state:d,target:c,to:h,preventScrollReset:p,viewTransition:u}=o,x=go(o,yo),{basename:y}=l.useContext(Q),S,b=!1;if(typeof h=="string"&&wo.test(h)&&(S=h,Co))try{let k=new URL(window.location.href),A=h.startsWith("//")?new URL(k.protocol+h):new URL(h),E=ze(A.pathname,y);A.origin===k.origin&&E!=null?h=E+A.search+A.hash:b=!0}catch{}let g=Kt(h,{relative:a}),m=ko(h,{replace:i,state:d,target:c,preventScrollReset:p,relative:a,viewTransition:u});function v(k){r&&r(k),k.defaultPrevented||m(k)}return l.createElement("a",Ce({},x,{href:S||g,onClick:b||n?r:v,ref:s,target:c}))});var Ie;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={}));var qe;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qe||(qe={}));function ko(t,o){let{target:s,replace:r,state:a,preventScrollReset:n,relative:i,viewTransition:d}=o===void 0?{}:o,c=D(),h=ee(),p=at(t,{relative:i});return l.useCallback(u=>{if(mo(u,s)){u.preventDefault();let x=r!==void 0?r:pe(h)===pe(p);c(t,{replace:x,state:a,preventScrollReset:n,relative:i,viewTransition:d})}},[h,c,p,r,a,s,t,n,i,d])}function Po(t){let o=l.useRef(we(t)),s=l.useRef(!1),r=ee(),a=l.useMemo(()=>bo(r.search,s.current?null:o.current),[r.search]),n=D(),i=l.useCallback((d,c)=>{const h=we(typeof d=="function"?d(a):d);s.current=!0,n("?"+h,c)},[n,a]);return[a,i]}const Ao=()=>{const{user:t}=N();return e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"100%"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:{fontSize:"14px",color:"#6c757d"},children:["Bem-vindo, ",t?.nome||"Usuário"]}),e.jsx("div",{style:{width:"32px",height:"32px",backgroundColor:"#0066cc",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:t?.nome?.charAt(0)?.toUpperCase()||"E"})]})})};function dt(t,o){if(!t)return!1;const r=(n=>n?typeof n.role=="string"?n.role:n.role&&typeof n.role=="object"?n.role.nome||n.role.name||null:n.role_id===1?"Admin":n.role_id===2?"Aluno":n.role_id===3?"Professor":null:null)(t);return r?(Array.isArray(o)?o:[o]).includes(r):!1}const zo=()=>{const{user:t,logout:o}=N(),s=ee(),r=D(),a=()=>{o(),r("/login")},i=[{path:"/dashboard",label:"Dashboard",icon:"🏠",roles:["Admin","Professor","Aluno"]},{path:"/processos",label:"Processos",icon:"📋",roles:["Admin","Professor","Aluno"]},{path:"/agendamentos",label:"Agendamentos",icon:"📅",roles:["Admin","Professor","Aluno"]},{path:"/arquivos",label:"Arquivos",icon:"📁",roles:["Admin","Professor","Aluno"]},{path:"/usuarios",label:"Usuários",icon:"👥",roles:["Admin","Professor"]},{path:"/profile",label:"Perfil",icon:"👤",roles:["Admin","Professor","Aluno"]}].filter(h=>dt(t,h.roles)),d=h=>s.pathname===h,c=()=>t?.role?typeof t.role=="string"?t.role:typeof t.role=="object"&&t.role!==null&&(t.role.nome||t.role.name)||"Usuário":"Usuário";return e.jsxs("div",{"data-testid":"navigation-container",style:{height:"calc(100vh - 76px)",display:"flex",flexDirection:"column",overflowY:"auto"},children:[e.jsxs("div",{"data-testid":"user-info-section",style:{padding:"20px",borderBottom:"1px solid #e9ecef",textAlign:"center",backgroundColor:"#f8f9fa"},children:[e.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:"#0066cc",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 8px",fontSize:"18px",fontWeight:"bold"},children:t?.nome?.charAt(0)?.toUpperCase()||"U"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#212529",marginBottom:"4px"},children:t?.nome||"Usuário"}),e.jsx("div",{style:{fontSize:"12px",color:"#6c757d"},children:c()})]}),e.jsx("div",{"data-testid":"menu-items-section",style:{flex:1,padding:"16px 0"},children:i.map(h=>e.jsxs(ke,{to:h.path,"data-testid":`menu-item-${h.path.replace("/","")}`,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",textDecoration:"none",color:d(h.path)?"#0066cc":"#495057",backgroundColor:d(h.path)?"#e3f2fd":"transparent",borderRight:d(h.path)?"3px solid #0066cc":"3px solid transparent",fontSize:"14px",fontWeight:d(h.path)?"600":"400",transition:"all 0.2s ease"},onMouseEnter:p=>{d(h.path)||(p.target.style.backgroundColor="#f8f9fa")},onMouseLeave:p=>{d(h.path)||(p.target.style.backgroundColor="transparent")},children:[e.jsx("span",{style:{fontSize:"16px"},children:h.icon}),e.jsx("span",{children:h.label})]},h.path))}),e.jsx("div",{"data-testid":"logout-section",style:{padding:"16px 20px",borderTop:"1px solid #e9ecef"},children:e.jsxs("button",{onClick:a,"data-testid":"logout-button",style:{width:"100%",padding:"10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background-color 0.2s ease"},onMouseEnter:h=>h.target.style.backgroundColor="#c82333",onMouseLeave:h=>h.target.style.backgroundColor="#dc3545",children:[e.jsx("span",{children:"🚪"}),"Sair"]})})]})},Eo=({children:t,showNavigation:o=!0})=>{const{isAuthenticated:s}=N();return s?e.jsxs("div",{"data-testid":"main-layout-container",style:{display:"flex",minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Inter, system-ui, sans-serif"},children:[o&&e.jsxs("aside",{"data-testid":"sidebar-navigation",style:{width:"260px",backgroundColor:"#ffffff",borderRight:"1px solid #e9ecef",boxShadow:"2px 0 4px rgba(0,0,0,0.05)",position:"fixed",height:"100vh",zIndex:1e3},children:[e.jsxs("div",{"data-testid":"sidebar-header",style:{padding:"20px",borderBottom:"1px solid #e9ecef",backgroundColor:"#0066cc",color:"white"},children:[e.jsx("h1",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Sistema NPJ"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",opacity:.9},children:"UFMT"})]}),e.jsx(zo,{})]}),e.jsxs("main",{"data-testid":"main-content-area",style:{marginLeft:o?"260px":"0",flex:1,display:"flex",flexDirection:"column"},children:[e.jsx("header",{"data-testid":"top-header",style:{backgroundColor:"white",padding:"16px 24px",borderBottom:"1px solid #e9ecef",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:e.jsx(Ao,{})}),e.jsx("div",{"data-testid":"page-content-wrapper",style:{flex:1,padding:"24px",backgroundColor:"#f8f9fa"},children:t})]})]}):t};function To({onSuccess:t}){const{login:o,loading:s}=N(),[r,a]=l.useState(""),[n,i]=l.useState(""),[d,c]=l.useState(""),h=D(),p=async u=>{u.preventDefault(),c("");const x=await o(r,n);x.success?t&&t():c(x.message||"E-mail ou senha inválidos")};return e.jsxs("form",{onSubmit:p,style:{width:"100%"},children:[d&&e.jsxs("div",{style:{backgroundColor:"#fee",border:"1px solid #fcc",color:"#c33",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"0.9rem",textAlign:"center"},children:["⚠️ ",d]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"📧 E-mail:"}),e.jsx("input",{type:"email",value:r,onChange:u=>a(u.target.value),required:!0,autoFocus:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:u=>u.target.style.borderColor="#007bff",onBlur:u=>u.target.style.borderColor="#e9ecef",placeholder:"seu.email@exemplo.com"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"🔒 Senha:"}),e.jsx("input",{type:"password",value:n,onChange:u=>i(u.target.value),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:u=>u.target.style.borderColor="#007bff",onBlur:u=>u.target.style.borderColor="#e9ecef",placeholder:"Digite sua senha"})]}),e.jsx("button",{type:"submit",disabled:s,style:{width:"100%",padding:"15px",backgroundColor:s?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"bold",cursor:s?"not-allowed":"pointer",transition:"all 0.3s ease",marginBottom:"15px"},onMouseEnter:u=>{s||(u.target.style.backgroundColor="#0056b3",u.target.style.transform="translateY(-2px)")},onMouseLeave:u=>{s||(u.target.style.backgroundColor="#007bff",u.target.style.transform="translateY(0)")},children:s?"🔄 Entrando...":"🚀 Entrar no Sistema"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 10px 0"},children:"Não tem uma conta?"}),e.jsx("button",{type:"button",onClick:()=>h("/registrar-completo"),style:{backgroundColor:"transparent",color:"#28a745",border:"2px solid #28a745",padding:"10px 20px",borderRadius:"8px",fontSize:"0.9rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:u=>{u.target.style.backgroundColor="#28a745",u.target.style.color="white"},onMouseLeave:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#28a745"},children:"👤 Criar Nova Conta"})]})]})}function Ro(){const t=D(),{isAuthenticated:o}=N();return Ye.useEffect(()=>{o&&t("/dashboard")},[o,t]),e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #001F3F 0%, #003366 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"#001F3F",padding:"15px 0",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",zIndex:100},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"white",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold",color:"#001F3F"},children:"NPJ"}),e.jsx("h1",{style:{color:"white",margin:0,fontSize:"1.3rem",fontWeight:"bold"},children:"Sistema NPJ - UFMT"})]})}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 50px rgba(0,0,0,0.3)",width:"100%",maxWidth:"450px",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"🔐"}),e.jsx("h2",{style:{fontSize:"2rem",fontWeight:"bold",color:"#001F3F",marginBottom:"10px",margin:0},children:"Acesso ao Sistema"}),e.jsx("p",{style:{color:"#666",fontSize:"1rem",margin:0},children:"Entre com suas credenciais para continuar"})]}),e.jsx(To,{onSuccess:()=>t("/dashboard")}),e.jsxs("div",{style:{marginTop:"30px",textAlign:"center",paddingTop:"20px",borderTop:"1px solid #e9ecef"},children:[e.jsx("button",{onClick:()=>t("/"),style:{background:"none",border:"none",color:"#007bff",cursor:"pointer",fontSize:"0.9rem",textDecoration:"underline",marginRight:"20px"},children:"← Voltar ao Início"}),e.jsx("button",{onClick:()=>t("/register"),style:{background:"none",border:"none",color:"#007bff",cursor:"pointer",fontSize:"0.9rem",textDecoration:"underline"},children:"Criar Conta"})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,textAlign:"center",padding:"20px",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:["© ",new Date().getFullYear()," Universidade Federal de Mato Grosso - NPJ"]})]})}function No(){const{user:t,register:o}=N(),[s,r]=l.useState(""),[a,n]=l.useState(""),[i,d]=l.useState(""),[c,h]=l.useState(2),[p,u]=l.useState(""),[x,y]=l.useState(!1),[S,b]=l.useState(!1),g=D(),m=async v=>{v.preventDefault(),u(""),y(!1),b(!0);try{let k=2;if(t&&t.role_id===1)k=c;else if(t&&t.role==="Professor"&&(c===2||c===3))k=c;else if(t&&t.role==="Professor"&&c===1){u("Professores não podem criar Admins."),b(!1);return}const A=await o(s,a,i,k);A.success?(y(!0),setTimeout(()=>g("/login"),2e3)):u(A.message||"Erro ao registrar")}catch(k){u(k.message||"Erro ao registrar")}b(!1)};return e.jsxs("form",{onSubmit:m,style:{width:"100%"},children:[p&&e.jsxs("div",{style:{backgroundColor:"#fee",border:"1px solid #fcc",color:"#c33",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"0.9rem",textAlign:"center"},children:["⚠️ ",p]}),x&&e.jsx("div",{style:{backgroundColor:"#efe",border:"1px solid #cfc",color:"#363",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"0.9rem",textAlign:"center"},children:"✅ Cadastro realizado! Redirecionando para login..."}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"👤 Nome Completo:"}),e.jsx("input",{value:s,onChange:v=>r(v.target.value),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:v=>v.target.style.borderColor="#28a745",onBlur:v=>v.target.style.borderColor="#e9ecef",placeholder:"Seu nome completo"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"📧 E-mail:"}),e.jsx("input",{type:"email",value:a,onChange:v=>n(v.target.value),required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:v=>v.target.style.borderColor="#28a745",onBlur:v=>v.target.style.borderColor="#e9ecef",placeholder:"seu.email@exemplo.com"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"🔒 Senha:"}),e.jsx("input",{type:"password",value:i,onChange:v=>d(v.target.value),required:!0,minLength:6,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:v=>v.target.style.borderColor="#28a745",onBlur:v=>v.target.style.borderColor="#e9ecef",placeholder:"Mínimo 6 caracteres"})]}),t&&(t.role_id===1||t.role_id===3)&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"🎓 Tipo de Usuário:"}),e.jsxs("select",{value:c,onChange:v=>h(Number(v.target.value)),style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box",backgroundColor:"white"},onFocus:v=>v.target.style.borderColor="#28a745",onBlur:v=>v.target.style.borderColor="#e9ecef",children:[e.jsx("option",{value:2,children:"👨‍🎓 Aluno"}),e.jsx("option",{value:3,children:"👨‍🏫 Professor"}),t.role_id===1&&e.jsx("option",{value:1,children:"👑 Admin"})]})]}),e.jsx("button",{type:"submit",disabled:S||x,style:{width:"100%",padding:"15px",backgroundColor:S||x?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"bold",cursor:S||x?"not-allowed":"pointer",transition:"all 0.3s ease",marginBottom:"15px"},onMouseEnter:v=>{!S&&!x&&(v.target.style.backgroundColor="#218838",v.target.style.transform="translateY(-2px)")},onMouseLeave:v=>{!S&&!x&&(v.target.style.backgroundColor="#28a745",v.target.style.transform="translateY(0)")},children:S?"🔄 Criando Conta...":x?"✅ Conta Criada!":"🚀 Criar Conta"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 10px 0"},children:"Já possui uma conta?"}),e.jsx("button",{type:"button",onClick:()=>g("/login"),style:{backgroundColor:"transparent",color:"#007bff",border:"2px solid #007bff",padding:"10px 20px",borderRadius:"8px",fontSize:"0.9rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:v=>{v.target.style.backgroundColor="#007bff",v.target.style.color="white"},onMouseLeave:v=>{v.target.style.backgroundColor="transparent",v.target.style.color="#007bff"},children:"🔐 Fazer Login"})]})]})}function $e(){const t=D();return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"#001F3F",padding:"15px 0",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",zIndex:100},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"white",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold",color:"#001F3F"},children:"NPJ"}),e.jsx("h1",{style:{color:"white",margin:0,fontSize:"1.3rem",fontWeight:"bold"},children:"Sistema NPJ - UFMT"})]})}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 50px rgba(0,0,0,0.3)",width:"100%",maxWidth:"500px",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"👤"}),e.jsx("h2",{style:{fontSize:"2rem",fontWeight:"bold",color:"#001F3F",marginBottom:"10px",margin:0},children:"Criar Nova Conta"}),e.jsx("p",{style:{color:"#666",fontSize:"1rem",margin:0},children:"Preencha seus dados para se cadastrar no sistema"})]}),e.jsx(No,{}),e.jsxs("div",{style:{marginTop:"30px",textAlign:"center",paddingTop:"20px",borderTop:"1px solid #e9ecef"},children:[e.jsx("button",{onClick:()=>t("/"),style:{background:"none",border:"none",color:"#007bff",cursor:"pointer",fontSize:"0.9rem",textDecoration:"underline",marginRight:"20px"},children:"← Voltar ao Início"}),e.jsx("button",{onClick:()=>t("/login"),style:{background:"none",border:"none",color:"#007bff",cursor:"pointer",fontSize:"0.9rem",textDecoration:"underline"},children:"Já tenho conta"})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,textAlign:"center",padding:"20px",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:["© ",new Date().getFullYear()," Universidade Federal de Mato Grosso - NPJ"]})]})}function _o(){const{register:t}=N(),o=D(),[s,r]=l.useState({nome:"",email:"",senha:"",telefone:""}),[a,n]=l.useState(""),[i,d]=l.useState(!1);function c(p){const{name:u,value:x}=p.target;r(y=>({...y,[u]:x}))}async function h(p){p.preventDefault(),n(""),d(!0);const u=await t(s.nome,s.email,s.senha,2);u.success?(n("Usuário cadastrado com sucesso! Redirecionando..."),setTimeout(()=>o("/login"),1500)):n(u.message||"Erro ao cadastrar usuário."),d(!1)}return e.jsxs("form",{onSubmit:h,style:{width:"100%",display:"flex",flexDirection:"column",gap:"18px"},children:[a&&e.jsx("div",{style:{backgroundColor:a.includes("sucesso")?"#d4edda":"#f8d7da",color:a.includes("sucesso")?"#155724":"#721c24",border:`1px solid ${a.includes("sucesso")?"#c3e6cb":"#f5c6cb"}`,borderRadius:"8px",padding:"12px",marginBottom:"10px",textAlign:"center",fontWeight:"bold",fontSize:"1rem"},children:a}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.95rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"👤 Nome Completo:"}),e.jsx("input",{name:"nome",value:s.nome,onChange:c,required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:p=>p.target.style.borderColor="#28a745",onBlur:p=>p.target.style.borderColor="#e9ecef",placeholder:"Seu nome completo"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.95rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"📧 E-mail:"}),e.jsx("input",{name:"email",type:"email",value:s.email,onChange:c,required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:p=>p.target.style.borderColor="#28a745",onBlur:p=>p.target.style.borderColor="#e9ecef",placeholder:"seu.email@exemplo.com"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.95rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"🔒 Senha:"}),e.jsx("input",{name:"senha",type:"password",value:s.senha,onChange:c,required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:p=>p.target.style.borderColor="#28a745",onBlur:p=>p.target.style.borderColor="#e9ecef",placeholder:"Mínimo 6 caracteres"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.95rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"📞 Telefone:"}),e.jsx("input",{name:"telefone",value:s.telefone,onChange:c,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:p=>p.target.style.borderColor="#28a745",onBlur:p=>p.target.style.borderColor="#e9ecef",placeholder:"(xx) xxxxx-xxxx"})]}),e.jsx("button",{type:"submit",disabled:i,style:{width:"100%",padding:"15px",backgroundColor:i?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"bold",cursor:i?"not-allowed":"pointer",transition:"all 0.3s ease",marginBottom:"10px"},onMouseEnter:p=>{i||(p.target.style.backgroundColor="#218838",p.target.style.transform="translateY(-2px)")},onMouseLeave:p=>{i||(p.target.style.backgroundColor="#28a745",p.target.style.transform="translateY(0)")},children:i?"🔄 Cadastrando...":"🚀 Criar Conta"}),e.jsx("button",{type:"button",onClick:()=>o("/login"),style:{width:"100%",padding:"12px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s ease",marginBottom:"5px"},onMouseEnter:p=>p.target.style.backgroundColor="#0056b3",onMouseLeave:p=>p.target.style.backgroundColor="#007bff",children:"← Voltar para Login"})]})}function Bo(){return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #001F3F 0%, #003366 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"#001F3F",padding:"15px 0",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",zIndex:100},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"white",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold",color:"#001F3F"},children:"NPJ"}),e.jsx("h1",{style:{color:"white",margin:0,fontSize:"1.3rem",fontWeight:"bold"},children:"Sistema NPJ - UFMT"})]})}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 50px rgba(0,0,0,0.3)",width:"100%",maxWidth:"450px",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"👤"}),e.jsx("h2",{style:{fontSize:"2rem",fontWeight:"bold",color:"#001F3F",marginBottom:"10px",margin:0},children:"Cadastro Completo"}),e.jsx("p",{style:{color:"#666",fontSize:"1rem",margin:0},children:"Preencha os dados para criar sua conta"})]}),e.jsx(_o,{})]}),e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,textAlign:"center",padding:"20px",color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"© 2025 Universidade Federal de Mato Grosso - NPJ"})]})}class Fo{constructor(){this.cache=new Map,this.pendingRequests=new Map}generateKey(o,s="GET",r=null){const a=r?JSON.stringify(r):"";return`${s}:${o}:${a}`}has(o){const s=this.cache.get(o);return s?Date.now()-s.timestamp>300*1e3?(this.cache.delete(o),!1):!0:!1}get(o){const s=this.cache.get(o);return s?s.data:null}set(o,s){this.cache.set(o,{data:s,timestamp:Date.now()})}async getOrFetch(o,s){if(this.has(o))return this.get(o);if(this.pendingRequests.has(o))return await this.pendingRequests.get(o);const r=s().then(a=>(this.set(o,a),this.pendingRequests.delete(o),a)).catch(a=>{throw this.pendingRequests.delete(o),a});return this.pendingRequests.set(o,r),await r}clear(o=null){o?(this.cache.delete(o),this.pendingRequests.delete(o)):(this.cache.clear(),this.pendingRequests.clear())}}const I=new Fo,oe=t=>t?typeof t.role=="string"?t.role:t.role&&typeof t.role=="object"?t.role.nome||t.role.name||null:t.role_id===1?"Admin":t.role_id===2?"Aluno":t.role_id===3?"Professor":null:null;function Mo(t="",o=!1){const{token:s,user:r}=N();return He({queryKey:["processos",r?.id,oe(r),t,o],queryFn:async()=>{const a=oe(r);if(!s||!a)throw new Error("Token ou usuário não disponível");let n=[];return a==="Aluno"?n=await C("/api/processos/meus-processos",{token:s}):a==="Professor"?t.trim()?n=await C("/api/processos",{token:s}):o?n=await C("/api/processos/meus-processos",{token:s}):n=(await C("/api/processos",{token:s})).sort((d,c)=>new Date(c.updatedAt||c.criado_em)-new Date(d.updatedAt||d.criado_em)).slice(0,4):a==="Admin"&&(o?n=await C("/api/processos/meus-processos",{token:s}):n=await C("/api/processos",{token:s})),t.trim()&&(n=n.filter(i=>i.numero_processo?.toLowerCase().includes(t.toLowerCase())||i.numero?.toLowerCase().includes(t.toLowerCase()))),n},enabled:!!(s&&r),staleTime:1e3*60*5,gcTime:1e3*60*30})}function Lo(){const{token:t,user:o}=N();return He({queryKey:["dashboard",o?.id,oe(o)],queryFn:async()=>{const s=oe(o);if(!t||!s){const r=`Token ou usuário não disponível - token: ${!!t}, userRole: ${s}`;throw console.error("❌ useDashboardData:",r),new Error(r)}try{const[r,a,n,i,d]=await Promise.all([I.getOrFetch("dashboard:processos",()=>C("/api/processos",{token:t})),s==="Admin"?I.getOrFetch("dashboard:usuarios-count",()=>C("/api/usuarios/count",{token:t}).catch(()=>({total:0,porTipo:{}}))):Promise.resolve({total:0,porTipo:{}}),I.getOrFetch("dashboard:processos-recentes",()=>C("/api/processos/recentes",{token:t}).catch(()=>[])),s==="Admin"||s==="Professor"?I.getOrFetch("dashboard:processos-stats",()=>C("/api/processos/stats",{token:t}).catch(()=>({total:0,porStatus:{},ativos:0}))):Promise.resolve({total:0,porStatus:{},ativos:0}),I.getOrFetch("dashboard:atualizacoes",()=>C("/api/atualizacoes?limite=5",{token:t}).catch(()=>[]))]);let c={processos:r||[],processosRecentes:n||[],usuarios:[],atualizacoes:d||[]};const h=i?.porStatus||c.processos.reduce((p,u)=>{const x=u.status||"Indefinido";return p[x]=(p[x]||0)+1,p},{});return c.statusCounts=h,c.totalProcessos=i?.total||c.processos.length,c.processosPorStatus={em_andamento:h.em_andamento||0,aguardando:h.aguardando||0,finalizado:h.finalizado||0,arquivado:h.arquivado||0},c.processosAtivos=i?.ativos||c.processos.filter(p=>p.status!=="arquivado").length,s==="Admin"&&(c.totalUsuarios=a.total||0,c.usuariosAtivos=a.total||0,c.usuariosPorTipo=a.porTipo||{}),c}catch(r){return console.error("Erro na busca do dashboard:",r),{processos:[],processosRecentes:[],usuarios:[],atualizacoes:[],statusCounts:{},totalProcessos:0,totalUsuarios:0,processosAtivos:0,usuariosAtivos:0,usuariosPorTipo:{},processosPorStatus:{em_andamento:0,aguardando:0,finalizado:0,arquivado:0}}}},enabled:!!(t&&o&&oe(o)),staleTime:1e3*60*2,gcTime:1e3*60*10,retry:(s,r)=>r?.status===401||r?.status===403?!1:s<2})}function Uo(){return{getUserRole:oe}}const{getUserRole:Wo}=Uo();function O({label:t,value:o,color:s="#333",icon:r=""}){return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:24,fontWeight:"bold",color:s},children:[r&&e.jsx("span",{style:{marginRight:8},children:r}),o]}),e.jsx("div",{style:{fontSize:13,color:"#666",marginTop:4},children:t})]})}function xe({label:t,value:o,total:s,color:r="#007bff"}){const a=s>0?o/s*100:0;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,marginBottom:4},children:[e.jsx("span",{children:t}),e.jsx("span",{style:{fontWeight:"bold"},children:o})]}),e.jsx("div",{style:{backgroundColor:"#e9ecef",borderRadius:12,height:8,overflow:"hidden"},children:e.jsx("div",{style:{backgroundColor:r,height:"100%",width:`${a}%`,transition:"width 0.5s ease",borderRadius:12}})}),s>0&&e.jsxs("div",{style:{fontSize:10,color:"#666",marginTop:2,textAlign:"right"},children:[a.toFixed(1),"%"]})]})}function ct({status:t}){const o=r=>{switch(r?.toLowerCase()){case"em_andamento":return"#ffc107";case"aguardando":return"#fd7e14";case"finalizado":return"#28a745";case"arquivado":return"#6c757d";default:return"#007bff"}},s=r=>{switch(r?.toLowerCase()){case"em_andamento":return"Em Andamento";case"aguardando":return"Aguardando";case"finalizado":return"Finalizado";case"arquivado":return"Arquivado";default:return r||"Não Definido"}};return e.jsx("span",{style:{backgroundColor:o(t),color:"white",padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:"bold",textTransform:"uppercase"},children:s(t)})}function $({title:t,children:o,color:s="#007bff"}){return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:12,padding:20,marginBottom:20,boxShadow:"0 2px 10px rgba(0,0,0,0.08)",border:`3px solid ${s}20`,transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow="0 4px 20px rgba(0,0,0,0.12)"},onMouseLeave:r=>{r.target.style.transform="translateY(0)",r.target.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)"},children:[t&&e.jsx("h3",{style:{color:s,marginBottom:16,fontSize:16,fontWeight:"bold",borderBottom:`2px solid ${s}20`,paddingBottom:8},children:t}),o]})}function he({data:t,title:o}){if(!t||t.length===0)return e.jsx("div",{style:{textAlign:"center",padding:20,color:"#666"},children:e.jsx("p",{children:"Sem dados para exibir"})});const s=t.reduce((n,i)=>n+i.value,0);let r=0;const a=["#007bff","#28a745","#ffc107","#dc3545","#6c757d","#17a2b8"];return e.jsxs("div",{style:{textAlign:"center"},children:[o&&e.jsx("h4",{style:{marginBottom:16,color:"#333"},children:o}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{position:"relative"},children:e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e9ecef",strokeWidth:"12"}),t.map((n,i)=>{n.value/s*100;const d=n.value/s*360,c=d>180?1:0,h=60+54*Math.cos((r-90)*Math.PI/180),p=60+54*Math.sin((r-90)*Math.PI/180);r+=d;const u=60+54*Math.cos((r-90)*Math.PI/180),x=60+54*Math.sin((r-90)*Math.PI/180);return n.value===0?null:e.jsx("path",{d:`M 60 60 L ${h} ${p} A 54 54 0 ${c} 1 ${u} ${x} Z`,fill:a[i%a.length],opacity:"0.8"},i)})]})}),e.jsx("div",{style:{flex:1,marginLeft:20},children:t.map((n,i)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8,fontSize:12},children:[e.jsx("div",{style:{width:12,height:12,backgroundColor:a[i%a.length],borderRadius:"50%",marginRight:8,opacity:.8}}),e.jsx("span",{style:{flex:1},children:n.label}),e.jsxs("span",{style:{fontWeight:"bold",marginLeft:8},children:[n.value," (",s>0?(n.value/s*100).toFixed(1):0,"%)"]})]},i))})]})]})}function Do({dashboardData:t,user:o}){const s=t?.processos||[],r=s.filter(d=>d.status!=="arquivado").length,a=s.filter(d=>d.status==="finalizado").length,n=[{label:"Em Andamento",value:s.filter(d=>d.status==="em_andamento").length},{label:"Aguardando",value:s.filter(d=>d.status==="aguardando").length},{label:"Finalizados",value:a},{label:"Arquivados",value:s.filter(d=>d.status==="arquivado").length}],i=s.slice(0,3);return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[e.jsxs($,{title:"📋 Meus Processos",color:"#007bff",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:15,marginBottom:20},children:[e.jsx(O,{label:"Total",value:s.length,color:"#007bff",icon:"📊"}),e.jsx(O,{label:"Ativos",value:r,color:"#28a745",icon:"⚡"}),e.jsx(O,{label:"Finalizados",value:a,color:"#6c757d",icon:"✅"})]}),e.jsx("div",{style:{marginTop:15},children:e.jsx(xe,{label:"Progresso Geral",value:a,total:s.length,color:"#28a745"})})]}),e.jsx($,{title:"📈 Status dos Processos",color:"#17a2b8",children:e.jsx(he,{data:n})}),e.jsx($,{title:"🕒 Últimos Processos",color:"#ffc107",children:i.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:i.map((d,c)=>e.jsxs("div",{style:{padding:12,backgroundColor:"#f8f9fa",borderRadius:8,borderLeft:"4px solid #ffc107"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:d.numero||`Processo ${c+1}`}),e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:d.descricao||"Sem descrição"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ct,{status:d.status}),e.jsx("span",{style:{fontSize:11,color:"#999"},children:d.created_at?new Date(d.created_at).toLocaleDateString():"N/A"})]})]},c))}):e.jsxs("div",{style:{textAlign:"center",color:"#666",padding:20},children:[e.jsx("p",{children:"🔍 Nenhum processo encontrado"}),e.jsx("p",{style:{fontSize:12,marginTop:8},children:"Seus processos aparecerão aqui quando forem criados."})]})})]})}function Io({dashboardData:t,user:o}){const s=t?.processos||[],r=t?.alunos||[],a=s.filter(d=>d.status!=="arquivado").length,n=[{label:"Em Andamento",value:s.filter(d=>d.status==="em_andamento").length},{label:"Aguardando",value:s.filter(d=>d.status==="aguardando").length},{label:"Finalizados",value:s.filter(d=>d.status==="finalizado").length},{label:"Arquivados",value:s.filter(d=>d.status==="arquivado").length}],i=s.slice(0,3);return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[e.jsxs($,{title:"🎓 Supervisão Acadêmica",color:"#28a745",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:15,marginBottom:20},children:[e.jsx(O,{label:"Processos",value:s.length,color:"#28a745",icon:"📚"}),e.jsx(O,{label:"Ativos",value:a,color:"#17a2b8",icon:"⚡"}),e.jsx(O,{label:"Alunos",value:r.length,color:"#ffc107",icon:"👥"})]}),e.jsx("div",{style:{marginTop:15},children:e.jsx(xe,{label:"Processos Finalizados",value:s.filter(d=>d.status==="finalizado").length,total:s.length,color:"#28a745"})})]}),e.jsx($,{title:"📊 Distribuição de Status",color:"#6f42c1",children:e.jsx(he,{data:n})}),e.jsx($,{title:"🔍 Processos Supervisionados",color:"#dc3545",children:i.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:i.map((d,c)=>e.jsxs("div",{style:{padding:12,backgroundColor:"#f8f9fa",borderRadius:8,borderLeft:"4px solid #dc3545"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:d.numero||`Processo ${c+1}`}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:["Aluno: ",d.aluno_nome||"N/A"]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ct,{status:d.status}),e.jsx("span",{style:{fontSize:11,color:"#999"},children:d.updated_at?new Date(d.updated_at).toLocaleDateString():"N/A"})]})]},c))}):e.jsxs("div",{style:{textAlign:"center",color:"#666",padding:20},children:[e.jsx("p",{children:"📋 Nenhum processo sob supervisão"}),e.jsx("p",{style:{fontSize:12,marginTop:8},children:"Processos supervisionados aparecerão aqui."})]})})]})}function qo({dashboardData:t}){const o=t?.totalProcessos||0,s=t?.totalUsuarios||0,r=t?.processosAtivos||0,a=t?.usuariosAtivos||0,n=[{label:"Em Andamento",value:t?.processosPorStatus?.em_andamento||0},{label:"Aguardando",value:t?.processosPorStatus?.aguardando||0},{label:"Finalizados",value:t?.processosPorStatus?.finalizado||0},{label:"Arquivados",value:t?.processosPorStatus?.arquivado||0}],i=[{label:"Alunos",value:t?.usuariosPorTipo?.aluno||0},{label:"Professores",value:t?.usuariosPorTipo?.professor||0},{label:"Admins",value:t?.usuariosPorTipo?.admin||0}];return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[e.jsxs($,{title:"🏛️ Visão Geral do Sistema",color:"#6f42c1",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:15,marginBottom:20},children:[e.jsx(O,{label:"Total Processos",value:o,color:"#6f42c1",icon:"📋"}),e.jsx(O,{label:"Processos Ativos",value:r,color:"#28a745",icon:"⚡"}),e.jsx(O,{label:"Total Usuários",value:s,color:"#17a2b8",icon:"👥"}),e.jsx(O,{label:"Usuários Ativos",value:a,color:"#ffc107",icon:"✅"})]}),e.jsxs("div",{style:{marginTop:15},children:[e.jsx(xe,{label:"Taxa de Processos Ativos",value:r,total:o,color:"#28a745"}),e.jsx(xe,{label:"Taxa de Usuários Ativos",value:a,total:s,color:"#17a2b8"})]})]}),e.jsx($,{title:"📊 Status dos Processos",color:"#dc3545",children:e.jsx(he,{data:n})}),e.jsx($,{title:"👥 Tipos de Usuários",color:"#fd7e14",children:e.jsx(he,{data:i})}),e.jsx($,{title:"⚙️ Ações Administrativas",color:"#20c997",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsx("button",{style:{padding:12,backgroundColor:"#007bff",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:"bold"},children:"📊 Relatório Completo"}),e.jsx("button",{style:{padding:12,backgroundColor:"#28a745",color:"white",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:"bold"},children:"👤 Gerenciar Usuários"}),e.jsx("button",{style:{padding:12,backgroundColor:"#ffc107",color:"#212529",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:"bold"},children:"📋 Gerenciar Processos"})]})})]})}function $o({dashboardData:t,user:o}){if(!t||!o)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:200,backgroundColor:"#f8f9fa",borderRadius:12,color:"#666"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:"⏳"}),e.jsx("div",{children:"Carregando dashboard..."})]})});const s=Wo(o);return e.jsxs("div",{children:[s==="Aluno"&&e.jsx(Do,{dashboardData:t,user:o}),s==="Professor"&&e.jsx(Io,{dashboardData:t,user:o}),s==="Admin"&&e.jsx(qo,{dashboardData:t,user:o}),!["Aluno","Professor","Admin"].includes(s)&&e.jsx($,{title:"⚠️ Acesso Restrito",color:"#dc3545",children:e.jsxs("div",{style:{textAlign:"center",color:"#666",padding:20},children:[e.jsxs("p",{children:["Papel de usuário não reconhecido: ",s]}),e.jsx("p",{style:{fontSize:12,marginTop:8},children:"Entre em contato com o administrador do sistema."})]})})]})}function Oo(){const{user:t}=N(),{data:o,isLoading:s,error:r}=Lo();return s?e.jsx(Z,{message:"Carregando Dashboard"}):r?e.jsx(Z,{error:r}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e9ecef",marginBottom:"24px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#212529"},children:"🏠 Dashboard"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Visão geral do sistema NPJ"})]}),e.jsx($o,{dashboardData:o,user:t})]})}const Go=[{icon:"⚖️",title:"Gestão de Processos",description:"Controle completo de todos os processos jurídicos em andamento."},{icon:"📄",title:"Documentação Digital",description:"Armazene e acesse todos os documentos relacionados aos processos."},{icon:"👥",title:"Gestão de Usuários",description:"Cadastro e acompanhamento de alunos, professores e administradores."},{icon:"📅",title:"Controle de Prazos",description:"Acompanhe atualizações e histórico dos processos."}],Vo=({icon:t,title:o,description:s})=>e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"30px 20px",textAlign:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",borderTop:"4px solid #007bff",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:"pointer"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-10px)",r.currentTarget.style.boxShadow="0 10px 25px rgba(0,0,0,0.15)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:t}),e.jsx("h3",{style:{color:"#001F3F",marginBottom:"15px",fontSize:"1.25rem",fontWeight:"bold"},children:o}),e.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:0},children:s})]});function Jo(){const t=D(),{user:o}=N(),s=()=>{t(o?"/dashboard":"/login")};return e.jsxs("div",{style:{minHeight:"100vh"},children:[e.jsx("header",{style:{backgroundColor:"#001F3F",padding:"20px 0",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",position:"sticky",top:0,zIndex:100},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:"white",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",fontWeight:"bold",color:"#001F3F"},children:"NPJ"}),e.jsx("h1",{style:{color:"white",margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:"Sistema NPJ - UFMT"})]}),e.jsxs("button",{onClick:s,style:{backgroundColor:"transparent",border:"2px solid white",color:"white",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:r=>{r.target.style.backgroundColor="white",r.target.style.color="#001F3F"},onMouseLeave:r=>{r.target.style.backgroundColor="transparent",r.target.style.color="white"},children:["🔒 ",o?"Ir para Dashboard":"Área Restrita"]})]})}),e.jsx("section",{style:{background:"linear-gradient(135deg, #001F3F 0%, #003366 100%)",color:"white",padding:"80px 0",position:"relative",overflow:"hidden"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"60px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{backgroundColor:"#007bff",color:"white",padding:"8px 16px",borderRadius:"20px",display:"inline-block",fontSize:"0.9rem",fontWeight:"bold",marginBottom:"20px"},children:"Núcleo de Práticas Jurídicas"}),e.jsx("h2",{style:{fontSize:"3rem",lineHeight:"1.2",marginBottom:"20px",fontWeight:"bold"},children:"Gestão Inteligente de Processos Jurídicos"}),e.jsx("p",{style:{fontSize:"1.25rem",marginBottom:"30px",lineHeight:"1.6",opacity:.9},children:"Plataforma completa para gestão de processos, usuários e documentos do NPJ da Universidade Federal de Mato Grosso."}),e.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:s,style:{backgroundColor:"rgba(255,255,255,0.9)",color:"#001F3F",border:"none",padding:"15px 30px",borderRadius:"6px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:r=>{r.target.style.backgroundColor="white",r.target.style.transform="translateY(-2px)"},onMouseLeave:r=>{r.target.style.backgroundColor="rgba(255,255,255,0.9)",r.target.style.transform="translateY(0)"},children:o?"Acessar Dashboard":"Acessar o Sistema"}),e.jsx("button",{onClick:()=>window.open("https://ufmt.br","_blank"),style:{backgroundColor:"transparent",color:"white",border:"2px solid white",padding:"15px 30px",borderRadius:"6px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:r=>{r.target.style.backgroundColor="white",r.target.style.color="#001F3F"},onMouseLeave:r=>{r.target.style.backgroundColor="transparent",r.target.style.color="white"},children:"Saiba Mais 🔗"})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"20px",padding:"40px",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"8rem",marginBottom:"20px"},children:"⚖️"}),e.jsx("h3",{style:{fontSize:"1.5rem",margin:0,opacity:.9},children:"Sistema de Gestão Jurídica"})]})})]})}),e.jsx("section",{style:{padding:"80px 0",backgroundColor:"#f8f9fa"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},children:[e.jsx("h2",{style:{textAlign:"center",fontSize:"2.5rem",marginBottom:"60px",color:"#001F3F",fontWeight:"bold"},children:"Funcionalidades do Sistema"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"30px"},children:Go.map((r,a)=>e.jsx(Vo,{icon:r.icon,title:r.title,description:r.description},a))})]})}),e.jsx("section",{style:{padding:"80px 0",backgroundColor:"white",borderTop:"1px solid #e9ecef",borderBottom:"1px solid #e9ecef"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"60px",alignItems:"center"},children:[e.jsxs("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"12px",padding:"40px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"6rem",marginBottom:"20px"},children:"🏛️"}),e.jsx("h3",{style:{fontSize:"1.5rem",color:"#001F3F",margin:0},children:"UFMT Campus"})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"2rem",marginBottom:"20px",color:"#001F3F",fontWeight:"bold"},children:"Sobre o NPJ da UFMT"}),e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"20px",lineHeight:"1.6",color:"#555"},children:"O Núcleo de Práticas Jurídicas da Universidade Federal de Mato Grosso é um espaço de aprendizado prático para estudantes de Direito, oferecendo assistência jurídica gratuita à comunidade."}),e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"30px",lineHeight:"1.6",color:"#555"},children:"Este sistema foi desenvolvido para otimizar a gestão de processos, permitindo que estudantes e professores acompanhem casos, prazos e documentos de forma eficiente e segura."}),e.jsx("button",{onClick:()=>window.open("https://ufmt.br","_blank"),style:{backgroundColor:"transparent",color:"#007bff",border:"2px solid #007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:r=>{r.target.style.backgroundColor="#007bff",r.target.style.color="white"},onMouseLeave:r=>{r.target.style.backgroundColor="transparent",r.target.style.color="#007bff"},children:"Conheça o NPJ 🔗"})]})]})}),e.jsx("footer",{style:{backgroundColor:"#001F3F",color:"white",padding:"50px 0 30px"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"40px",marginBottom:"40px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"20px",fontWeight:"bold"},children:"Sistema NPJ"}),e.jsx("p",{style:{lineHeight:"1.6",opacity:.8},children:"Plataforma de gestão de processos do Núcleo de Práticas Jurídicas da Universidade Federal de Mato Grosso."})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"20px",fontWeight:"bold"},children:"Links Úteis"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"5px 0",textAlign:"left",fontSize:"1rem",opacity:.8,transition:"opacity 0.3s ease"},onMouseEnter:r=>r.target.style.opacity="1",onMouseLeave:r=>r.target.style.opacity="0.8",children:"Acesso ao Sistema"}),e.jsx("button",{onClick:()=>t("/processos"),disabled:!o,style:{background:"none",border:"none",color:o?"white":"#666",cursor:o?"pointer":"not-allowed",padding:"5px 0",textAlign:"left",fontSize:"1rem",opacity:o?.8:.4,transition:"opacity 0.3s ease"},onMouseEnter:r=>o&&(r.target.style.opacity="1"),onMouseLeave:r=>o&&(r.target.style.opacity="0.8"),children:"Gerenciar Processos"}),e.jsx("button",{onClick:()=>t("/usuarios"),disabled:!o,style:{background:"none",border:"none",color:o?"white":"#666",cursor:o?"pointer":"not-allowed",padding:"5px 0",textAlign:"left",fontSize:"1rem",opacity:o?.8:.4,transition:"opacity 0.3s ease"},onMouseEnter:r=>o&&(r.target.style.opacity="1"),onMouseLeave:r=>o&&(r.target.style.opacity="0.8"),children:"Gerenciar Usuários"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"20px",fontWeight:"bold"},children:"Contato"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("p",{style:{margin:0,opacity:.8},children:"📍 Av. Fernando Corrêa da Costa, 2367"}),e.jsx("p",{style:{margin:0,opacity:.8,marginLeft:"20px"},children:"Boa Esperança, Cuiabá - MT"}),e.jsx("p",{style:{margin:0,opacity:.8,marginLeft:"20px"},children:"CEP: 78060-900"}),e.jsx("p",{style:{margin:0,opacity:.8},children:"📧 npj@ufmt.br"}),e.jsx("p",{style:{margin:0,opacity:.8},children:"📞 (65) 3615-8000"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"20px",fontWeight:"bold"},children:"Legal"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("a",{href:"#",style:{color:"white",textDecoration:"none",opacity:.8,transition:"opacity 0.3s ease"},onMouseEnter:r=>r.target.style.opacity="1",onMouseLeave:r=>r.target.style.opacity="0.8",children:"Termos de Uso"}),e.jsx("a",{href:"#",style:{color:"white",textDecoration:"none",opacity:.8,transition:"opacity 0.3s ease"},onMouseEnter:r=>r.target.style.opacity="1",onMouseLeave:r=>r.target.style.opacity="0.8",children:"Política de Privacidade"}),e.jsx("a",{href:"#",style:{color:"white",textDecoration:"none",opacity:.8,transition:"opacity 0.3s ease"},onMouseEnter:r=>r.target.style.opacity="1",onMouseLeave:r=>r.target.style.opacity="0.8",children:"Acessibilidade"})]})]})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"20px",textAlign:"center"},children:e.jsxs("p",{style:{margin:0,opacity:.6,fontSize:"0.9rem"},children:["© ",new Date().getFullYear()," Universidade Federal de Mato Grosso - NPJ. Todos os direitos reservados."]})})]})})]})}function me(t){if(!t)return"";let o=t.replace(/^.*uploads[\\/]/,"uploads/").replace(/^\\+|^\/+/,"");return`${"http://localhost:3001/".replace(/\/$/,"")||"http://localhost:3001"}/${o}`}function Yo(){const{user:t,token:o,setUser:s}=N(),[r,a]=l.useState(null),[n,i]=l.useState({nome:"",email:"",telefone:""}),[d,c]=l.useState(!1),[h,p]=l.useState(""),[u,x]=l.useState(!0),[y,S]=l.useState([]),[b,g]=l.useState(!0),[m,v]=l.useState(!1),[k,A]=l.useState(""),[E,T]=l.useState(""),[F,j]=l.useState(!1),[W,R]=l.useState(""),P=async w=>{w.preventDefault(),T("");try{if(!k||k.length<6){T("A nova senha deve ter pelo menos 6 caracteres.");return}await C("/api/usuarios/me/senha",{method:"PUT",token:o,body:{senha:k}}),T("Senha alterada com sucesso!"),v(!1),A("")}catch(_){T(_.message||"Erro ao alterar senha")}},B=async()=>{if(window.confirm("Tem certeza que deseja inativar sua conta? Essa ação é irreversível!")){j(!0),R("");try{await C("/api/usuarios/me",{method:"DELETE",token:o}),R("Conta inativada. Você será deslogado."),setTimeout(()=>{window.location.href="/login"},2e3)}catch(w){R(w.message||"Erro ao inativar conta")}j(!1)}};l.useEffect(()=>{(async()=>{if(o){x(!0);try{const _=await C("/api/usuarios/me",{token:o});a(_),s(_),i({nome:_.nome,email:_.email,telefone:_.telefone||""})}catch(_){p("Erro ao carregar perfil: "+(_.message||""))}x(!1)}})()},[o,s]),l.useEffect(()=>{(async()=>{if(!(!r?.id||!o)){g(!0);try{const _=await C(`/api/arquivos/usuario/${r.id}`,{token:o});S(Array.isArray(_)?_:[])}catch{S([])}g(!1)}})()},[r?.id,o]);const f=w=>{i({...n,[w.target.name]:w.target.value})},z=(w,_=30)=>{if(w.length<=_)return w;const Ne=w.split(".").pop();return`${w.slice(0,w.lastIndexOf(".")).slice(0,_-Ne.length-4)+"..."}.${Ne}`},G=async w=>{w.preventDefault(),p("");try{await C("/api/usuarios/me",{method:"PUT",body:{nome:n.nome,email:n.email,telefone:n.telefone},token:o}),a({...r,...n}),s({...r,...n}),c(!1),p("Perfil atualizado!")}catch(_){p(_.message||"Erro ao atualizar perfil")}};return u?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:e.jsxs("div",{style:{textAlign:"center",color:"#666"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"⏳"}),e.jsx("div",{children:"Carregando perfil..."})]})}):r?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"30px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",border:"3px solid #007bff20"},children:[e.jsx("h3",{style:{color:"#007bff",marginBottom:"20px",fontSize:"1.3rem",fontWeight:"bold",borderBottom:"2px solid #007bff20",paddingBottom:"10px",display:"flex",alignItems:"center",gap:"10px"},children:"📋 Informações Pessoais"}),h&&e.jsxs("div",{style:{backgroundColor:h.includes("Erro")?"#fee":"#efe",border:`1px solid ${h.includes("Erro")?"#fcc":"#cfc"}`,color:h.includes("Erro")?"#c33":"#363",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"0.9rem",textAlign:"center"},children:[h.includes("Erro")?"⚠️":"✅"," ",h]}),d?e.jsxs("form",{onSubmit:G,style:{display:"grid",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"👤 Nome:"}),e.jsx("input",{name:"nome",value:n.nome,onChange:f,required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:w=>w.target.style.borderColor="#007bff",onBlur:w=>w.target.style.borderColor="#e9ecef"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"📧 Email:"}),e.jsx("input",{name:"email",value:n.email,onChange:f,required:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:w=>w.target.style.borderColor="#007bff",onBlur:w=>w.target.style.borderColor="#e9ecef"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"📞 Telefone:"}),e.jsx("input",{name:"telefone",value:n.telefone,onChange:f,placeholder:"Ex: (11) 99999-9999",style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:w=>w.target.style.borderColor="#007bff",onBlur:w=>w.target.style.borderColor="#e9ecef"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>w.target.style.backgroundColor="#218838",onMouseLeave:w=>w.target.style.backgroundColor="#28a745",children:"✅ Salvar Alterações"}),e.jsx("button",{type:"button",onClick:()=>c(!1),style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>w.target.style.backgroundColor="#5a6268",onMouseLeave:w=>w.target.style.backgroundColor="#6c757d",children:"❌ Cancelar"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"25px"},children:[e.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid #007bff"},children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"👤 Nome"}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333"},children:r.nome})]}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid #28a745"},children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"📧 Email"}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333"},children:r.email})]}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid #ffc107"},children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"📞 Telefone"}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333"},children:r.telefone||"Não informado"})]}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid #6f42c1"},children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"5px"},children:"🎓 Tipo"}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333"},children:r.role?.nome||r.role||"-"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>c(!0),style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>w.target.style.backgroundColor="#0056b3",onMouseLeave:w=>w.target.style.backgroundColor="#007bff",children:"✏️ Editar Dados"}),e.jsx("button",{onClick:()=>v(w=>!w),style:{backgroundColor:"#ffc107",color:"#212529",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>w.target.style.backgroundColor="#e0a800",onMouseLeave:w=>w.target.style.backgroundColor="#ffc107",children:"🔒 Trocar Senha"}),e.jsx("button",{onClick:B,disabled:F,style:{backgroundColor:F?"#ccc":"#dc3545",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:F?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>{F||(w.target.style.backgroundColor="#c82333")},onMouseLeave:w=>{F||(w.target.style.backgroundColor="#dc3545")},children:F?"⏳ Processando...":"🗑️ Inativar Conta"})]}),W&&e.jsxs("div",{style:{marginTop:"15px",padding:"12px",backgroundColor:"#fee",border:"1px solid #fcc",color:"#c33",borderRadius:"8px",fontSize:"0.9rem",textAlign:"center"},children:["⚠️ ",W]})]})]}),m&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"30px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",border:"3px solid #ffc10720"},children:[e.jsx("h3",{style:{color:"#ffc107",marginBottom:"20px",fontSize:"1.3rem",fontWeight:"bold",borderBottom:"2px solid #ffc10720",paddingBottom:"10px",display:"flex",alignItems:"center",gap:"10px"},children:"🔒 Alterar Senha"}),e.jsxs("form",{onSubmit:P,style:{display:"grid",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"bold",color:"#333",marginBottom:"8px"},children:"🔐 Nova Senha:"}),e.jsx("input",{type:"password",value:k,onChange:w=>A(w.target.value),required:!0,minLength:6,placeholder:"Mínimo 6 caracteres",style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.3s ease",outline:"none",boxSizing:"border-box"},onFocus:w=>w.target.style.borderColor="#ffc107",onBlur:w=>w.target.style.borderColor="#e9ecef"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",style:{backgroundColor:"#ffc107",color:"#212529",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>w.target.style.backgroundColor="#e0a800",onMouseLeave:w=>w.target.style.backgroundColor="#ffc107",children:"🔑 Salvar Nova Senha"}),e.jsx("button",{type:"button",onClick:()=>v(!1),style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:w=>w.target.style.backgroundColor="#5a6268",onMouseLeave:w=>w.target.style.backgroundColor="#6c757d",children:"❌ Cancelar"})]}),E&&e.jsxs("div",{style:{padding:"12px",backgroundColor:E.includes("sucesso")?"#efe":"#fee",border:`1px solid ${E.includes("sucesso")?"#cfc":"#fcc"}`,color:E.includes("sucesso")?"#363":"#c33",borderRadius:"8px",fontSize:"0.9rem",textAlign:"center"},children:[E.includes("sucesso")?"✅":"⚠️"," ",E]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"30px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)",border:"3px solid #17a2b820"},children:[e.jsx("h3",{style:{color:"#17a2b8",marginBottom:"20px",fontSize:"1.3rem",fontWeight:"bold",borderBottom:"2px solid #17a2b820",paddingBottom:"10px",display:"flex",alignItems:"center",gap:"10px"},children:"📁 Meus Arquivos Enviados"}),b?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px",color:"#666"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"⏳"}),e.jsx("div",{children:"Carregando arquivos..."})]})}):y.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px dashed #dee2e6"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"15px"},children:"📂"}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"5px"},children:"Nenhum arquivo enviado"}),e.jsx("div",{style:{fontSize:"0.9rem"},children:"Seus arquivos aparecerão aqui quando forem enviados ao sistema."})]}):e.jsx("div",{style:{display:"grid",gap:"15px"},children:y.map(w=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef",transition:"all 0.3s ease"},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#e9ecef",_.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#f8f9fa",_.currentTarget.style.transform="translateY(0)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",flex:1},children:[e.jsx("div",{style:{fontSize:"1.5rem"},children:"📄"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",color:"#333",marginBottom:"5px"},title:w.nome,children:z(w.nome)}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#666"},children:["Tamanho: ",Math.round(w.tamanho/1024)," KB"]})]})]}),e.jsx("button",{onClick:()=>window.open(me(w.caminho),"_blank","noopener,noreferrer"),style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:_=>_.target.style.backgroundColor="#138496",onMouseLeave:_=>_.target.style.backgroundColor="#17a2b8",children:"👁️ Abrir"})]},w.id))})]})]}):e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0,0,0,0.08)"},children:e.jsxs("div",{style:{textAlign:"center",color:"#dc3545"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"❌"}),e.jsx("div",{children:"Não foi possível carregar o perfil."})]})})}function Oe(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#343a40"},children:"👤 Meu Perfil"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Gerencie suas informações pessoais e configurações de conta"})]}),e.jsx(Yo,{})]})}function Ho(){const{forgotPassword:t}=N(),[o,s]=l.useState(""),[r,a]=l.useState(""),[n,i]=l.useState(!1),d=async c=>{c.preventDefault(),a(""),i(!0);const h=await t(o);h.success?a("Se o e-mail estiver cadastrado, você receberá instruções para redefinir a senha."):a(h.message||"Erro ao solicitar redefinição de senha."),i(!1)};return e.jsxs("form",{onSubmit:d,children:[e.jsx("h2",{children:"Esqueci minha senha"}),r&&e.jsx("div",{children:r}),e.jsxs("div",{children:[e.jsx("label",{children:"E-mail cadastrado:"}),e.jsx("input",{type:"email",value:o,onChange:c=>s(c.target.value),required:!0})]}),e.jsx("button",{type:"submit",disabled:n,children:n?"Enviando...":"Enviar"})]})}function Ko(){return e.jsx("div",{style:{maxWidth:400,margin:"auto",paddingTop:64},children:e.jsx(Ho,{})})}function Qo(){const[t]=Po(),o=D(),s=t.get("token")||"",[r,a]=l.useState(""),[n,i]=l.useState(""),[d,c]=l.useState(""),[h,p]=l.useState(!1);if(!s)return e.jsx("div",{children:"Token inválido. Verifique o link enviado por e-mail."});const u=async x=>{if(x.preventDefault(),c(""),r!==n){c("A nova senha e a confirmação não coincidem.");return}p(!0);try{await C("/auth/resetar-senha",{method:"POST",body:{token:s,nova_senha:r}}),c("Senha redefinida com sucesso! Redirecionando para login..."),setTimeout(()=>o("/login"),2e3)}catch(y){c(y.message||"Erro ao redefinir senha.")}p(!1)};return e.jsxs("form",{onSubmit:u,children:[e.jsx("h2",{children:"Redefinir senha"}),d&&e.jsx("div",{style:{color:d.includes("sucesso")?"green":"red"},children:d}),e.jsxs("div",{children:[e.jsx("label",{children:"Nova senha:"}),e.jsx("input",{type:"password",value:r,onChange:x=>a(x.target.value),required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Confirmar nova senha:"}),e.jsx("input",{type:"password",value:n,onChange:x=>i(x.target.value),required:!0,minLength:6})]}),e.jsx("button",{type:"submit",disabled:h,children:h?"Alterando...":"Alterar senha"})]})}function Xo(t,o){const[s,r]=l.useState(t);return l.useEffect(()=>{const a=setTimeout(()=>{r(t)},o);return()=>{clearTimeout(a)}},[t,o]),s}const Zo=(t,o=10)=>{const[s,r]=l.useState(1),a=l.useMemo(()=>Math.ceil(t/o),[t,o]),n=l.useMemo(()=>(s-1)*o,[s,o]),i=l.useMemo(()=>Math.min(n+o-1,t-1),[n,o,t]),d=l.useCallback(p=>{r(Math.max(1,Math.min(p,a)))},[a]),c=l.useCallback(()=>{d(s+1)},[s,d]),h=l.useCallback(()=>{d(s-1)},[s,d]);return{currentPage:s,totalPages:a,startIndex:n,endIndex:i,goToPage:d,nextPage:c,prevPage:h,hasNext:s<a,hasPrev:s>1}},ut=l.memo(({data:t=[],columns:o=[],itemsPerPage:s=10,searchableColumns:r=[],sortableColumns:a=[],onRowClick:n=null,loading:i=!1,emptyMessage:d="Nenhum item encontrado"})=>{const[c,h]=l.useState(""),[p,u]=l.useState({key:null,direction:"asc"}),x=l.useMemo(()=>c?t.filter(m=>r.some(v=>m[v]?.toString().toLowerCase().includes(c.toLowerCase()))):t,[t,c,r]),y=l.useMemo(()=>p.key?[...x].sort((m,v)=>{const k=m[p.key],A=v[p.key];return k<A?p.direction==="asc"?-1:1:k>A?p.direction==="asc"?1:-1:0}):x,[x,p]),S=Zo(y.length,s),b=l.useMemo(()=>y.slice(S.startIndex,S.endIndex+1),[y,S.startIndex,S.endIndex]),g=l.useCallback(m=>{a.includes(m)&&u(v=>({key:m,direction:v.key===m&&v.direction==="asc"?"desc":"asc"}))},[a]);return i?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",fontSize:"1.1rem",color:"#666"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px"},children:"⏳"}),"Carregando dados..."]})}):e.jsxs("div",{style:{width:"100%"},children:[r.length>0&&e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx("input",{type:"text",placeholder:`Buscar por ${r.join(", ")}...`,value:c,onChange:m=>h(m.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>m.target.style.borderColor="#007bff",onBlur:m=>m.target.style.borderColor="#e9ecef"})}),y.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666",fontSize:"1.1rem"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:"📭"}),d]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{overflowX:"auto",border:"1px solid #e9ecef",borderRadius:"8px",marginBottom:"20px"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"white"},children:[e.jsx("thead",{style:{backgroundColor:"#f8f9fa"},children:e.jsx("tr",{children:o.map(m=>e.jsxs("th",{onClick:()=>g(m.key),style:{padding:"15px",textAlign:"left",fontWeight:"bold",color:"#333",cursor:a.includes(m.key)?"pointer":"default",borderBottom:"2px solid #e9ecef",userSelect:"none",position:"relative"},children:[m.label,a.includes(m.key)&&e.jsx("span",{style:{marginLeft:"8px",color:p.key===m.key?"#007bff":"#ccc"},children:p.key===m.key?p.direction==="asc"?"↑":"↓":"↕"})]},m.key))})}),e.jsx("tbody",{children:b.map((m,v)=>e.jsx("tr",{onClick:()=>n?.(m),style:{cursor:n?"pointer":"default",borderBottom:"1px solid #e9ecef",transition:"background-color 0.2s ease"},onMouseEnter:k=>{n&&(k.target.style.backgroundColor="#f8f9fa")},onMouseLeave:k=>{n&&(k.target.style.backgroundColor="transparent")},children:o.map(k=>e.jsx("td",{style:{padding:"15px",color:"#333",fontSize:"0.9rem"},children:k.render?k.render(m[k.key],m):m[k.key]},k.key))},m.id||v))})]})}),S.totalPages>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},children:[e.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Mostrando ",S.startIndex+1," a ",S.endIndex+1," de ",y.length," itens"]}),e.jsxs("div",{style:{display:"flex",gap:"5px"},children:[e.jsx("button",{onClick:S.prevPage,disabled:!S.hasPrev,style:{padding:"8px 12px",border:"1px solid #e9ecef",backgroundColor:S.hasPrev?"white":"#f8f9fa",color:S.hasPrev?"#007bff":"#ccc",borderRadius:"4px",cursor:S.hasPrev?"pointer":"not-allowed",fontSize:"0.9rem"},children:"← Anterior"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",padding:"0 12px",fontSize:"0.9rem",color:"#666"},children:[S.currentPage," / ",S.totalPages]}),e.jsx("button",{onClick:S.nextPage,disabled:!S.hasNext,style:{padding:"8px 12px",border:"1px solid #e9ecef",backgroundColor:S.hasNext?"white":"#f8f9fa",color:S.hasNext?"#007bff":"#ccc",borderRadius:"4px",cursor:S.hasNext?"pointer":"not-allowed",fontSize:"0.9rem"},children:"Próxima →"})]})]})]})]})});ut.displayName="OptimizedTable";const Pe=t=>t?typeof t.role=="string"?t.role:t.role&&typeof t.role=="object"?t.role.nome||t.role.name||null:t.role_id===1?"Admin":t.role_id===2?"Aluno":t.role_id===3?"Professor":null:null,te=(t,o)=>{const s=Pe(t);return s?(Array.isArray(o)?o:[o]).includes(s):!1},er=t=>te(t,["Admin","Professor"]),Ae=t=>{if(!t)return"-";try{return new Date(t).toLocaleDateString("pt-BR")}catch{return"-"}},X=t=>typeof t=="object"&&t!==null?t.nome||t.name||JSON.stringify(t):t||"-",Ge={primary:{padding:"12px 24px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},success:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},danger:{padding:"12px 24px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},secondary:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"}},tr=t=>{switch(X(t)){case"Aberto":return{bg:"#d4edda",color:"#155724"};case"Em andamento":return{bg:"#fff3cd",color:"#856404"};case"Fechado":case"Concluído":return{bg:"#f8d7da",color:"#721c24"};default:return{bg:"#f8f9fa",color:"#6c757d"}}},H=({variant:t="primary",children:o,onClick:s,disabled:r=!1,type:a="button",style:n={},...i})=>{const d=Ge[t]||Ge.primary,c={...d,...n,opacity:r?.6:1,cursor:r?"not-allowed":"pointer"},h=u=>{if(!r){switch(t){case"success":u.target.style.backgroundColor="#218838";break;case"danger":u.target.style.backgroundColor="#c82333";break;case"secondary":u.target.style.backgroundColor="#545b62";break;default:u.target.style.backgroundColor="#0056b3"}u.target.style.transform="translateY(-2px)"}},p=u=>{r||(u.target.style.backgroundColor=d.backgroundColor,u.target.style.transform="translateY(0)")};return e.jsx("button",{type:a,onClick:r?void 0:s,disabled:r,style:c,onMouseEnter:h,onMouseLeave:p,...i,children:o})},pt=({status:t,customColors:o={}})=>{const s=X(t),r=o[s]||tr(s);return e.jsx("span",{style:{padding:"6px 12px",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"bold",backgroundColor:r.bg,color:r.color,display:"inline-block",textAlign:"center",minWidth:"70px"},children:s})};function or(){const t=D(),{user:o}=N(),[s,r]=l.useState(""),[a,n]=l.useState(()=>Pe(o)==="Aluno"),i=Xo(s,300),{data:d=[],isLoading:c,error:h,refetch:p}=Mo(i,a),u=l.useMemo(()=>[{key:"numero_processo",label:"Número do Processo",render:(x,y)=>e.jsx(H,{variant:"link",onClick:()=>t(`/processos/${y.id}`),style:{color:"#007bff",background:"none",border:"none",padding:0,fontSize:"0.95rem",fontWeight:"bold",textDecoration:"underline",boxShadow:"none"},children:x||y.numero||"-"})},{key:"descricao",label:"Descrição",render:x=>X(x)},{key:"status",label:"Status",render:x=>e.jsx(pt,{status:x})},{key:"assistido",label:"Assistido",render:x=>X(x)},{key:"updatedAt",label:"Última Atualização",render:(x,y)=>Ae(x||y.criado_em)},{key:"actions",label:"Ações",render:(x,y)=>e.jsx(H,{variant:"success",onClick:()=>t(`/processos/${y.id}`),style:{padding:"8px 16px",fontSize:"0.85rem"},children:"👁️ Ver Detalhes"})}],[t]);return o?h?e.jsx(Z,{error:h}):e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e9ecef",marginBottom:"24px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#212529"},children:"Lista de Processos"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Gerencie todos os processos do sistema"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",margin:"20px 0"},children:[Pe(o)!=="Aluno"&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:()=>n(!a),style:{transform:"scale(1.1)"}}),"Apenas meus processos"]}),er(o)&&e.jsx(H,{variant:"success",onClick:()=>t("/processos/novo"),style:{padding:"10px 16px",fontSize:"14px",fontWeight:"500"},children:"➕ Novo Processo"})]}),e.jsx(ut,{data:d,columns:u,searchableColumns:["numero_processo","numero","descricao","assistido"],sortableColumns:["numero_processo","descricao","status","assistido","updatedAt"],onRowClick:x=>t(`/processos/${x.id}`),loading:c,emptyMessage:"Nenhum processo encontrado",itemsPerPage:10})]}):e.jsx(Z,{message:"Verificando autenticação"})}function rr({processoId:t,onSuccess:o}){const{token:s,user:r}=N(),[a,n]=l.useState(""),[i,d]=l.useState(""),[c,h]=l.useState(""),[p,u]=l.useState(""),[x,y]=l.useState(!1),[S,b]=l.useState(["Despacho","Petição","Audiência","Observação"]),[g,m]=l.useState(""),[v,k]=l.useState(!1),[A,E]=l.useState([]),[T,F]=l.useState(!0);l.useEffect(()=>{async function R(){try{F(!0);const P=await ue.getUserFiles(s,r.id);E(Array.isArray(P)?P:[])}catch(P){console.error("Erro ao buscar arquivos:",P),E([]),u("Erro ao carregar seus arquivos. Verifique se você tem arquivos enviados.")}finally{F(!1)}}r?.id&&s&&R()},[r,s]);const j=()=>{if(g.trim()&&!S.includes(g.trim())){const R=g.trim();b([...S,R]),d(R),m(""),k(!1)}},W=async R=>{if(R.preventDefault(),u(""),!i){u("Selecione ou adicione um tipo de atualização.");return}if(!a.trim()){u("Descrição é obrigatória.");return}if(!c){u("Selecione um anexo já enviado.");return}y(!0);try{const P=Number(c);if(!A.find(f=>f.id===P)){u("Arquivo selecionado não foi encontrado. Verifique se o arquivo ainda existe ou recarregue a página."),y(!1);return}await ve.createProcessUpdate(s,{processo_id:t,descricao:a,tipo_atualizacao:i,arquivos_id:P}),u("Atualização cadastrada!"),n(""),d(""),h(""),k(!1),m(""),o&&o()}catch(P){u(P.message||"Erro ao cadastrar atualização.")}y(!1)};return e.jsxs("form",{onSubmit:W,children:[e.jsx("h4",{children:"Nova Atualização"}),p&&e.jsx("div",{style:{color:p.includes("Erro")?"red":"green",marginBottom:"10px"},children:p}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{children:"Tipo:"}),e.jsxs("select",{value:i,onChange:R=>d(R.target.value),required:!0,style:{display:"block",width:"100%",marginTop:"5px"},children:[e.jsx("option",{value:"",children:"Selecione"}),S.map((R,P)=>e.jsx("option",{value:R,children:R},P))]}),!v&&e.jsx("button",{type:"button",onClick:()=>k(!0),style:{marginTop:"8px",backgroundColor:"#007bff",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Adicionar tipo"}),v&&e.jsxs("div",{style:{marginTop:"8px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"Nome do novo tipo",value:g,onChange:R=>m(R.target.value),style:{padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{type:"button",onClick:j,style:{backgroundColor:"#28a745",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Adicionar"}),e.jsx("button",{type:"button",onClick:()=>{k(!1),m("")},style:{backgroundColor:"#6c757d",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancelar"})]})]})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{children:"Descrição:"}),e.jsx("textarea",{value:a,onChange:R=>n(R.target.value),required:!0,style:{display:"block",width:"100%",marginTop:"5px",minHeight:"80px"}})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{children:"Anexo:"}),T?e.jsx("div",{style:{marginTop:"5px",color:"#666"},children:"Carregando seus arquivos..."}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:c,onChange:R=>h(R.target.value),required:!0,style:{display:"block",width:"100%",marginTop:"5px"},children:[e.jsx("option",{value:"",children:"Selecione um arquivo já enviado"}),A.map(R=>e.jsx("option",{value:R.id,children:R.nome},R.id))]}),A.length===0&&e.jsxs("div",{style:{marginTop:"5px",color:"#dc3545",fontSize:"14px"},children:["Nenhum arquivo encontrado. ",e.jsx("a",{href:"/arquivos",target:"_blank",rel:"noopener noreferrer",children:"Envie um arquivo primeiro"})]})]}),c&&(()=>{const R=A.find(B=>B.id===c);if(!R)return null;const P=me(R.caminho);return e.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",style:{marginTop:"8px",display:"inline-block",color:"#007bff"},children:"Visualizar anexo selecionado"})})(),e.jsx("a",{href:"/arquivos",target:"_blank",rel:"noopener noreferrer",style:{marginTop:"8px",display:"inline-block",color:"#007bff"},children:"Enviar novo arquivo"})]}),e.jsx("button",{type:"submit",disabled:x,style:{backgroundColor:x?"#ccc":"#007bff",color:"white",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:x?"not-allowed":"pointer"},children:x?"Salvando...":"Salvar"})]})}const sr={materia_assunto_id:"Matéria/Assunto",fase_id:"Fase",diligencia_id:"Diligência",local_tramitacao_id:"Local de Tramitação",status:"Status",descricao:"Descrição",assistido:"Assistido(a)",contato_assistido:"Contato do Assistido",num_processo_sei:"Nº Processo/SEI",numero_processo:"Número do Processo"};function Ve(t,o,s){if(!o)return"-";switch(t){case"materia_assunto_id":return s.materias?.find(r=>r.id==o)?.nome||o;case"fase_id":return s.fases?.find(r=>r.id==o)?.nome||o;case"diligencia_id":return s.diligencias?.find(r=>r.id==o)?.nome||o;case"local_tramitacao_id":return s.localTramitacoes?.find(r=>r.id==o)?.nome||o;default:return o}}function ar(t,o){return t?t.replace(/([a-zA-Z_]+): '?([\d]+)'? *→ *'?([\d]+)'?/g,function(s,r,a,n){const i=sr[r]||r,d=Ve(r,a,o),c=Ve(r,n,o);return`${i}: '${d}' → '${c}'`}):""}function xt({processoId:t}){const{token:o,user:s}=N(),[r,a]=l.useState([]),[n,i]=l.useState(!0),[d,c]=l.useState(!1),[h,p]=l.useState({materias:[],fases:[],diligencias:[],localTramitacoes:[]});return l.useEffect(()=>{async function u(){try{const x=await ve.getProcessUpdates(o,t);a(x)}catch{a([])}i(!1)}u()},[t,o,d]),l.useEffect(()=>{let u=!0;async function x(){try{const[y,S,b,g]=await Promise.all([I.getOrFetch("aux:materias",()=>U.getMateriaAssunto(o)),I.getOrFetch("aux:fases",()=>U.getFase(o)),I.getOrFetch("aux:diligencias",()=>U.getDiligencia(o)),I.getOrFetch("aux:localTramitacoes",()=>U.getLocalTramitacao(o))]);u&&p({materias:y,fases:S,diligencias:b,localTramitacoes:g})}catch(y){console.error("Erro ao carregar dados auxiliares:",y),u&&p({materias:[],fases:[],diligencias:[],localTramitacoes:[]})}}return x(),()=>{u=!1}},[o]),n?e.jsx("div",{children:"Carregando atualizações..."}):e.jsxs("div",{children:[["admin","professor","aluno"].includes((s.role?.nome||s.role||"").toLowerCase())&&e.jsx("button",{onClick:()=>c(u=>!u),style:{backgroundColor:d?"#6c757d":"#28a745",color:"white",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginBottom:"16px",display:"flex",alignItems:"center",gap:"6px"},children:d?"❌ Fechar":"➕ Nova Atualização"}),d&&e.jsx(rr,{processoId:t,onSuccess:()=>c(!1)}),e.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[r.length===0&&e.jsx("li",{style:{padding:"20px",textAlign:"center",color:"#6c757d",fontStyle:"italic"},children:"Nenhuma atualização encontrada."}),r.map(u=>e.jsxs("li",{style:{marginBottom:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{display:"inline-block",backgroundColor:"#007bff",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",marginRight:"8px"},children:u.tipo_atualizacao||"Atualização"}),e.jsxs("span",{style:{color:"#6c757d",fontSize:"14px"},children:["Por: ",e.jsx("strong",{children:u.usuario?.nome||u.usuario_nome||"Usuário"})]})]}),e.jsx("span",{style:{color:"#6c757d",fontSize:"12px"},children:new Date(u.data_atualizacao).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.descricao&&e.jsx("div",{style:{marginBottom:"8px",color:"#495057"},children:ar(u.descricao,h)}),u.arquivo&&e.jsxs("div",{style:{backgroundColor:"#e9ecef",padding:"8px 12px",borderRadius:"4px",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:"📎"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#495057"},children:u.arquivo.nome||"Arquivo"}),e.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:["Tipo: ",u.arquivo.tipo||"N/A"," | Tamanho: ",u.arquivo.tamanho?`${(u.arquivo.tamanho/1024).toFixed(1)} KB`:"N/A"]})]}),e.jsx("a",{href:me(u.arquivo.caminho||u.anexo),target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"auto",color:"#007bff",textDecoration:"none",fontSize:"12px",fontWeight:"600"},children:"📥 Baixar"})]}),s.role&&["professor","admin"].includes((s.role?.nome||s.role||"").toLowerCase())&&e.jsx("button",{style:{marginTop:"8px",color:"#fff",background:"#dc3545",border:"none",borderRadius:"4px",padding:"4px 12px",fontSize:"12px",fontWeight:"500",cursor:"pointer"},onClick:async()=>{window.confirm("Tem certeza que deseja excluir esta atualização?")&&(await ve.deleteProcessUpdate(u.processo_id,u.id,o),a(r.filter(x=>x.id!==u.id)))},children:"🗑️ Excluir"})]},u.id))]})]})}function nr({processoId:t,onClose:o,onAssigned:s}){const{token:r}=N(),[a,n]=l.useState([]),[i,d]=l.useState(""),[c,h]=l.useState(""),[p,u]=l.useState(""),[x,y]=l.useState(!1);l.useEffect(()=>{async function b(){if(!i||i.length<3){n([]);return}try{const g=await J.getUsersForAssignment(r,i);n(g)}catch{n([])}}b()},[r,i]);const S=async b=>{if(b.preventDefault(),u(""),y(!0),!c){u("Selecione um usuário válido."),y(!1);return}try{const g=Number(c),m=a.find(A=>A.id===g),k={2:"Aluno",3:"Professor"}[m.role_id];if(!m||!m.role_id||!k){u("Usuário selecionado inválido ou role não permitida para vinculação."),y(!1);return}await ge.assignUserToProcess(r,t,g,k),u("Usuário vinculado com sucesso!"),h(""),s&&s(g),setTimeout(()=>{u(""),o&&o()},1e3)}catch(g){u(g.message||"Erro ao vincular usuário.")}y(!1)};return e.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:24,boxShadow:"0 2px 8px #0002",maxWidth:400},children:[e.jsx("h3",{children:"Vincular Usuário ao Processo"}),p&&e.jsx("div",{style:{marginBottom:8},children:p}),e.jsxs("form",{onSubmit:S,children:[e.jsx("input",{type:"text",placeholder:"Buscar usuário por nome (mín. 3 letras)",value:i,onChange:b=>d(b.target.value),style:{width:"100%",marginBottom:8,padding:6,borderRadius:4,border:"1px solid #ccc"}}),e.jsxs("select",{value:c,onChange:b=>h(b.target.value),required:!0,style:{width:"100%",marginBottom:8},children:[e.jsx("option",{value:"",children:"Selecione um usuário"}),a.map(b=>e.jsxs("option",{value:b.id,children:[b.nome," (",b.email,")",b.telefone?` - ${b.telefone}`:""]},b.id))]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{type:"submit",disabled:!c||x,style:{background:"#1976d2",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",fontWeight:500,fontSize:15,cursor:"pointer"},children:"Vincular"}),e.jsx("button",{type:"button",onClick:o,style:{background:"#aaa",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",fontWeight:500,fontSize:15,cursor:"pointer"},children:"Cancelar"})]})]})]})}function ir({processoId:t,alunos:o,onClose:s,onUnassigned:r}){const{token:a}=N(),[n,i]=l.useState(""),[d,c]=l.useState(""),[h,p]=l.useState(!1),u=async x=>{x.preventDefault(),c(""),p(!0);try{await ge.removeUserFromProcess(a,t,Number(n)),c("Usuário desvinculado com sucesso!"),i(""),r&&r(Number(n)),setTimeout(()=>{c(""),s&&s()},1e3)}catch(y){c(y.message||"Erro ao desvincular usuário.")}p(!1)};return e.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:24,boxShadow:"0 2px 8px #0002",maxWidth:400},children:[e.jsx("h3",{children:"Desvincular Usuário do Processo"}),d&&e.jsx("div",{style:{marginBottom:8},children:d}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("select",{value:n,onChange:x=>i(x.target.value),required:!0,style:{width:"100%",marginBottom:8},children:[e.jsx("option",{value:"",children:"Selecione um usuário vinculado"}),o.map(x=>e.jsxs("option",{value:x.id,children:[x.nome," (",x.email,")",x.telefone?` - ${x.telefone}`:""]},x.id))]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{type:"submit",disabled:!n||h,style:{background:"#d32f2f",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",fontWeight:500,fontSize:15,cursor:"pointer"},children:"Desvincular"}),e.jsx("button",{type:"button",onClick:s,style:{background:"#aaa",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",fontWeight:500,fontSize:15,cursor:"pointer"},children:"Cancelar"})]})]})]})}function lr(){const{id:t}=ae(),o=D(),{user:s,token:r}=N(),[a,n]=l.useState(null),[i,d]=l.useState(!0),[c,h]=l.useState(!1),[p,u]=l.useState(!1),[x,y]=l.useState([]);l.useEffect(()=>{let g=!0;const m=async()=>{const A=I.generateKey(`/api/processos/${t}/detalhes`);try{const E=await I.getOrFetch(A,()=>C(`/api/processos/${t}/detalhes`,{method:"GET",token:r}));g&&n(E)}catch(E){console.error("Erro ao buscar processo:",E),g&&n(null)}},v=async()=>{const A=I.generateKey(`/api/processos/${t}/usuarios`);try{const E=await I.getOrFetch(A,()=>C(`/api/processos/${t}/usuarios`,{method:"GET",token:r}));g&&y(E)}catch(E){console.error("Erro ao buscar usuários vinculados:",E),g&&y([])}};return(async()=>{r&&t&&(d(!0),await Promise.all([m(),v()]),g&&d(!1))})(),()=>{g=!1}},[t,r]);const S=async g=>{try{I.clear(`GET:/api/processos/${t}/usuarios:`);const m=await C(`/api/processos/${t}/usuarios`,{method:"GET",token:r});y(m),h(!1)}catch(m){console.error("Erro ao recarregar usuários:",m),window.location.reload()}},b=async g=>{try{if(I.clear(`GET:/api/processos/${t}/usuarios:`),g)y(x.filter(m=>m.id!==g));else{const m=await C(`/api/processos/${t}/usuarios`,{method:"GET",token:r});y(m)}u(!1)}catch(m){console.error("Erro ao atualizar lista:",m)}};return i?e.jsx(Z,{message:"Carregando processo..."}):a?e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e9ecef",marginBottom:"24px"},children:[e.jsxs("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#212529"},children:["Processo Nº ",a.numero_processo||a.numero]}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Detalhes completos do processo"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",margin:"20px 0"},children:[e.jsx(H,{variant:"outline",onClick:()=>o("/processos"),children:"← Voltar à Lista"}),te(s,["Administrador","Professor"])&&e.jsx(H,{variant:"primary",onClick:()=>o(`/processos/${t}/editar`),children:"✏️ Editar"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"24px"},children:[e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#495057"},children:"📊 Status e Informações"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("div",{style:{marginTop:"4px"},children:e.jsx(pt,{status:a.status})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Descrição:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:X(a.descricao)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Data de Criação:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:Ae(a.created_at)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Última Atualização:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:Ae(a.updated_at)})]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#495057"},children:"👤 Assistido"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Nome:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:X(a.assistido)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Contato:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:X(a.contato_assistido)})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"1px solid #e9ecef",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#495057"},children:"👥 Usuários Vinculados"}),te(s,["Administrador","Professor"])&&e.jsx(H,{variant:"primary",size:"sm",onClick:()=>h(!0),children:"+ Vincular Usuário"})]}),x&&x.length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"12px"},children:x.map((g,m)=>e.jsxs("div",{style:{backgroundColor:"white",padding:"12px",borderRadius:"6px",border:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:g.nome}),e.jsxs("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#6c757d"},children:[g.email," - ",g.role]}),g.telefone&&e.jsxs("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#6c757d"},children:["📞 ",g.telefone]})]}),te(s,["Administrador","Professor"])&&e.jsx(H,{variant:"outline",size:"sm",onClick:()=>b(g.id),children:"✖"})]},g.id||g.email||m))}):e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6c757d"},children:[e.jsx("p",{children:"Nenhum usuário vinculado a este processo."}),te(s,["Administrador","Professor"])&&e.jsx("p",{style:{fontSize:"14px",marginTop:"8px"},children:'Clique em "Vincular Usuário" para adicionar alunos ou professores.'})]})]}),e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#495057"},children:"📝 Atualizações do Processo"}),e.jsx(xt,{processoId:t})]}),c&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:g=>{g.target===g.currentTarget&&h(!1)},children:e.jsx(nr,{processoId:t,onClose:()=>h(!1),onAssigned:S})}),p&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:g=>{g.target===g.currentTarget&&u(!1)},children:e.jsx(ir,{processoId:t,alunos:x,onClose:()=>u(!1),onUnassigned:b})})]}):e.jsx(Z,{error:"Processo não encontrado"})}const dr=()=>{const{token:t,user:o}=N(),[s,r]=l.useState({numero_processo:"",num_processo_sei:"",assistido:"",descricao:"",status:"",materia_assunto_id:"",local_tramitacao_id:"",sistema:"",fase_id:"",diligencia_id:""}),[a,n]=l.useState([]),[i,d]=l.useState([]),[c,h]=l.useState([]),[p,u]=l.useState([]),[x,y]=l.useState(""),[S,b]=l.useState(""),[g,m]=l.useState(""),[v,k]=l.useState(""),[A,E]=l.useState(""),[T,F]=l.useState({materiaAssunto:!1,localTramitacao:!1,fase:!1,diligencia:!1});l.useEffect(()=>{(async()=>{try{if(!t)throw new Error("Token de autenticação não encontrado. Certifique-se de que o usuário está logado.");const B={headers:{Authorization:`Bearer ${t}`}},[f,z,G,w]=await Promise.all([U.getMateriaAssunto(t),U.getFase(t),U.getDiligencia(t),U.getLocalTramitacao(t)]);n(f),d(z),h(G),u(w)}catch(B){console.error("Erro ao carregar dados:",B),alert(`Erro ao carregar dados auxiliares: ${B.message}`)}})()},[t]);const j=P=>{const{name:B,value:f}=P.target;r({...s,[B]:f})},W=async(P,B)=>{if(!B||!B.trim()){alert("Por favor, digite um valor válido.");return}try{let f;if(P==="materia-assunto")f=await U.createMateriaAssunto(t,B.trim());else if(P==="local-tramitacao")f=await U.createLocalTramitacao(t,B.trim());else if(P==="fase")f=await U.createFase(t,B.trim());else if(P==="diligencia")f=await U.createDiligencia(t,B.trim());else throw new Error("Tipo de campo auxiliar desconhecido.");alert(`${P} adicionado com sucesso!`);const[z,G,w,_]=await Promise.all([U.getMateriaAssunto(t),U.getFase(t),U.getDiligencia(t),U.getLocalTramitacao(t)]);n(z),d(G),h(w),u(_),P==="materia-assunto"?r({...s,materia_assunto_id:f.id}):P==="local-tramitacao"?r({...s,local_tramitacao_id:f.id}):P==="fase"?r({...s,fase_id:f.id}):P==="diligencia"&&r({...s,diligencia_id:f.id}),P==="materia-assunto"?(F({...T,materiaAssunto:!1}),b("")):P==="local-tramitacao"?(F({...T,localTramitacao:!1}),m("")):P==="fase"?(F({...T,fase:!1}),k("")):P==="diligencia"&&(F({...T,diligencia:!1}),E(""))}catch(f){console.error(`Erro ao adicionar novo valor em ${P}:`,f);let z=f.message||"Erro desconhecido";f.response&&f.response.data&&f.response.data.erro?z=f.response.data.erro:f.response&&f.response.data&&f.response.data.message&&(z=f.response.data.message),alert(`Erro ao adicionar novo valor: ${z}`)}},R=async P=>{P.preventDefault();try{const B=o?.id||null,f=await ge.createProcess(t,{...s,contato_assistido:x,idusuario_responsavel:B});alert("Processo criado com sucesso!")}catch(B){console.error("Erro ao criar processo:",B,B.response?.data),alert(`Erro ao criar processo: ${B.response?.data?.message||B.message}`)}};return e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Novo Processo"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número do Processo"}),e.jsx("input",{type:"text",name:"numero_processo",value:s.numero_processo,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Num/Processo/Sei"}),e.jsx("input",{type:"text",name:"num_processo_sei",value:s.num_processo_sei,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assistido/a"}),e.jsx("input",{type:"text",name:"assistido",value:s.assistido,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contato/Assistido"}),e.jsx("input",{type:"text",name:"contatoAssistido",value:x,onChange:P=>y(P.target.value),className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrição"}),e.jsx("textarea",{name:"descricao",value:s.descricao,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{name:"status",value:s.status,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione o status"}),e.jsx("option",{value:"Em andamento",children:"Em andamento"}),e.jsx("option",{value:"Concluído",children:"Concluído"}),e.jsx("option",{value:"Suspenso",children:"Suspenso"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Matéria/Assunto"}),e.jsxs("select",{name:"materia_assunto_id",value:s.materia_assunto_id,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione a matéria/assunto"}),a.map(P=>e.jsx("option",{value:P.id,children:P.nome},P.id))]}),!T.materiaAssunto&&e.jsx("button",{type:"button",onClick:()=>F({...T,materiaAssunto:!0}),className:"mt-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Adicionar novo valor"}),T.materiaAssunto&&e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"Adicionar novo Matéria/Assunto",value:S,onChange:P=>b(P.target.value),className:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{W("materia-assunto",S)},className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Adicionar"}),e.jsx("button",{type:"button",onClick:()=>{F({...T,materiaAssunto:!1}),b("")},className:"bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancelar"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Local de Tramitação"}),e.jsxs("select",{name:"local_tramitacao_id",value:s.local_tramitacao_id,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione o local de tramitação"}),p.map(P=>e.jsx("option",{value:P.id,children:P.nome},P.id))]}),!T.localTramitacao&&e.jsx("button",{type:"button",onClick:()=>F({...T,localTramitacao:!0}),className:"mt-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Adicionar novo valor"}),T.localTramitacao&&e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"Adicionar novo Local de Tramitação",value:g,onChange:P=>m(P.target.value),className:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{W("local-tramitacao",g)},className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Adicionar"}),e.jsx("button",{type:"button",onClick:()=>{F({...T,localTramitacao:!1}),m("")},className:"bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancelar"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sistema"}),e.jsxs("select",{name:"sistema",value:s.sistema,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione o sistema"}),e.jsx("option",{value:"Físico",children:"Físico"}),e.jsx("option",{value:"PEA",children:"PEA"}),e.jsx("option",{value:"PJE",children:"PJE"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fase"}),e.jsxs("select",{name:"fase_id",value:s.fase_id,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione a fase"}),i.map(P=>e.jsx("option",{value:P.id,children:P.nome},P.id))]}),!T.fase&&e.jsx("button",{type:"button",onClick:()=>F({...T,fase:!0}),className:"mt-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Adicionar novo valor"}),T.fase&&e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"Adicionar nova Fase",value:v,onChange:P=>k(P.target.value),className:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{W("fase",v)},className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Adicionar"}),e.jsx("button",{type:"button",onClick:()=>{F({...T,fase:!1}),k("")},className:"bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancelar"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Diligência"}),e.jsxs("select",{name:"diligencia_id",value:s.diligencia_id,onChange:j,className:"mt-2 block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione a diligência"}),c.map(P=>e.jsx("option",{value:P.id,children:P.nome},P.id))]}),!T.diligencia&&e.jsx("button",{type:"button",onClick:()=>F({...T,diligencia:!0}),className:"mt-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Adicionar novo valor"}),T.diligencia&&e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"Adicionar nova Diligência",value:A,onChange:P=>E(P.target.value),className:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm p-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{W("diligencia",A)},className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Adicionar"}),e.jsx("button",{type:"button",onClick:()=>{F({...T,diligencia:!1}),E("")},className:"bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancelar"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Criar"}),e.jsx("button",{type:"button",className:"bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>window.location.href="http://localhost:5173/processos/",children:"Cancelar"})]})]})};function cr(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#343a40"},children:"➕ Cadastrar Novo Processo"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Preencha os dados para criar um novo processo"})]}),e.jsx(dr,{})]})}function ur(){const{id:t}=ae(),{token:o}=N(),s=D(),[r,a]=l.useState(null),[n,i]=l.useState(!0),[d,c]=l.useState([]),[h,p]=l.useState([]),[u,x]=l.useState([]),[y,S]=l.useState([]);l.useEffect(()=>{async function m(){i(!0);try{const v=await C(`/api/processos/${t}/detalhes`,{token:o});a({numero_processo:v.numero_processo||"",num_processo_sei:v.num_processo_sei||"",assistido:v.assistido||"",descricao:v.descricao||"",status:v.status||"",materia_assunto_id:v.materiaAssunto?.id||"",local_tramitacao_id:v.localTramitacao?.id||"",sistema:v.sistema||"",fase_id:v.fase?.id||"",diligencia_id:v.diligencia?.id||"",contato_assistido:v.contato_assistido||""});const[k,A,E,T]=await Promise.all([U.getMateriaAssunto(o),U.getFase(o),U.getDiligencia(o),U.getLocalTramitacao(o)]);c(Array.isArray(k)?k:[]),p(Array.isArray(A)?A:[]),x(Array.isArray(E)?E:[]),S(Array.isArray(T)?T:[])}catch{a(null)}i(!1)}m()},[t,o]);const b=m=>{const{name:v,value:k}=m.target;a(A=>({...A,[v]:k}))},g=async m=>{m.preventDefault();try{await ge.updateProcess(o,t,r),alert("Processo atualizado com sucesso!"),s(`/processos/${t}`)}catch(v){alert("Erro ao atualizar processo: "+(v?.response?.data?.erro||v.message))}};return n||!r?e.jsx("div",{children:"Carregando dados do processo..."}):e.jsxs("div",{style:{maxWidth:600,margin:"0 auto",background:"#f3f4f6",padding:24,borderRadius:8},children:[e.jsx("h2",{children:"Editar Processo"}),e.jsxs("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsxs("label",{children:["Número do Processo",e.jsx("input",{name:"numero_processo",value:r.numero_processo,onChange:b,required:!0})]}),e.jsxs("label",{children:["Num/Processo/Sei",e.jsx("input",{name:"num_processo_sei",value:r.num_processo_sei,onChange:b})]}),e.jsxs("label",{children:["Assistido/a",e.jsx("input",{name:"assistido",value:r.assistido,onChange:b})]}),e.jsxs("label",{children:["Contato/Assistido",e.jsx("input",{name:"contato_assistido",value:r.contato_assistido,onChange:b})]}),e.jsxs("label",{children:["Descrição",e.jsx("textarea",{name:"descricao",value:r.descricao,onChange:b,required:!0})]}),e.jsxs("label",{children:["Status",e.jsxs("select",{name:"status",value:r.status,onChange:b,required:!0,children:[e.jsx("option",{value:"",children:"Selecione o status"}),e.jsx("option",{value:"Em andamento",children:"Em andamento"}),e.jsx("option",{value:"Concluído",children:"Concluído"}),e.jsx("option",{value:"Suspenso",children:"Suspenso"})]})]}),e.jsxs("label",{children:["Matéria/Assunto",e.jsxs("select",{name:"materia_assunto_id",value:r.materia_assunto_id,onChange:b,required:!0,children:[e.jsx("option",{value:"",children:"Selecione a matéria/assunto"}),d.map(m=>e.jsx("option",{value:m.id,children:m.nome},m.id))]})]}),e.jsxs("label",{children:["Fase",e.jsxs("select",{name:"fase_id",value:r.fase_id,onChange:b,required:!0,children:[e.jsx("option",{value:"",children:"Selecione a fase"}),h.map(m=>e.jsx("option",{value:m.id,children:m.nome},m.id))]})]}),e.jsxs("label",{children:["Diligência",e.jsxs("select",{name:"diligencia_id",value:r.diligencia_id,onChange:b,required:!0,children:[e.jsx("option",{value:"",children:"Selecione a diligência"}),u.map(m=>e.jsx("option",{value:m.id,children:m.nome},m.id))]})]}),e.jsxs("label",{children:["Local de Tramitação",e.jsxs("select",{name:"local_tramitacao_id",value:r.local_tramitacao_id,onChange:b,required:!0,children:[e.jsx("option",{value:"",children:"Selecione o local"}),y.map(m=>e.jsx("option",{value:m.id,children:m.nome},m.id))]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:16},children:[e.jsx("button",{type:"submit",style:{background:"#2563eb",color:"white",padding:"8px 16px",borderRadius:6,border:0,cursor:"pointer"},children:"Salvar"}),e.jsx("button",{type:"button",onClick:()=>s(`/processos/${t}`),style:{background:"#6b7280",color:"white",padding:"8px 16px",borderRadius:6,border:0,cursor:"pointer"},children:"Cancelar"})]})]})]})}function pr(){const{token:t}=N(),{id:o}=ae(),[s,r]=l.useState([]),[a,n]=l.useState(""),[i,d]=l.useState(""),[c,h]=l.useState(""),p=D();l.useEffect(()=>{let x="/api/usuarios/alunos";c&&(x+=`?search=${encodeURIComponent(c)}`),C(x,{token:t}).then(y=>r(y)).catch(()=>r([]))},[t,c]);const u=async x=>{x.preventDefault(),d("");try{await C("/api/processos/atribuir-aluno",{method:"POST",token:t,body:{processo_id:o,aluno_id:a}}),d("Aluno atribuído!"),setTimeout(()=>p(`/processos/${o}`),1e3)}catch(y){d(y.message||"Erro ao atribuir aluno.")}};return e.jsxs("form",{onSubmit:u,children:[e.jsx("h3",{children:"Atribuir Aluno ao Processo"}),i&&e.jsx("div",{children:i}),e.jsx("input",{type:"text",placeholder:"Buscar aluno por nome...",value:c,onChange:x=>h(x.target.value),style:{width:"100%",marginBottom:8,padding:6,borderRadius:4,border:"1px solid #ccc"}}),e.jsxs("select",{value:a,onChange:x=>n(x.target.value),required:!0,style:{width:"100%",marginBottom:8},children:[e.jsx("option",{value:"",children:"Selecione um aluno"}),s.map(x=>e.jsx("option",{value:x.id,children:x.nome},x.id))]}),e.jsx("button",{type:"submit",disabled:!a,style:{background:"#1976d2",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",fontWeight:500,fontSize:15,cursor:"pointer"},children:"Atribuir"})]})}function xr(){return e.jsx("div",{style:{maxWidth:400,margin:"auto",paddingTop:40},children:e.jsx(pr,{})})}function hr(){const{id:t}=ae();return e.jsx("div",{style:{maxWidth:700,margin:"auto",paddingTop:40},children:e.jsx(xt,{processoId:t})})}function gr({open:t,title:o,message:s,onConfirm:r,onCancel:a}){return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.32)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:e.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:28,minWidth:320,boxShadow:"2px 2px 20px #3332"},children:[e.jsx("h3",{children:o}),e.jsx("div",{style:{margin:"18px 0"},children:s}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:16},children:[e.jsx("button",{onClick:a,children:"Cancelar"}),e.jsx("button",{onClick:r,style:{background:"#d9534f",color:"#fff"},children:"Confirmar"})]})]})}):null}const fr=t=>t?typeof t.role=="string"?t.role:t.role&&typeof t.role=="object"?t.role.nome||t.role.name||null:t.role_id===1?"Admin":t.role_id===2?"Aluno":t.role_id===3?"Professor":null:null,ye=[{id:2,label:"Aluno"},{id:3,label:"Professor"},{id:1,label:"Administrador"}];function mr({onCreated:t}){const{token:o,user:s}=N(),[r,a]=l.useState({nome:"",email:"",senha:"",telefone:"",role_id:2}),[n,i]=l.useState(""),[d,c]=l.useState(!1),h=fr(s),p=h==="Professor",u=h==="Admin";let x=[];u?x=ye:p?x=ye.filter(b=>b.id!==1):x=ye.filter(b=>b.id===2);function y(b){const{name:g,value:m}=b.target;a(v=>({...v,[g]:m}))}async function S(b){b.preventDefault(),i(""),c(!0);try{await J.createUser(o,r),i("Usuário cadastrado com sucesso!"),a({nome:"",email:"",senha:"",telefone:"",role_id:2}),t&&t()}catch(g){i(g.message||"Erro ao cadastrar usuário.")}c(!1)}return e.jsxs("form",{onSubmit:S,style:{maxWidth:400,margin:"auto"},children:[e.jsx("h2",{children:"Criar Usuário"}),n&&e.jsx("div",{children:n}),e.jsxs("div",{children:[e.jsx("label",{children:"Nome:"}),e.jsx("input",{name:"nome",value:r.nome,onChange:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{name:"email",type:"email",value:r.email,onChange:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Senha:"}),e.jsx("input",{name:"senha",type:"password",value:r.senha,onChange:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Telefone:"}),e.jsx("input",{name:"telefone",value:r.telefone,onChange:y})]}),x.length>1?e.jsxs("div",{children:[e.jsx("label",{children:"Papel:"}),e.jsx("select",{name:"role_id",value:r.role_id,onChange:y,required:!0,children:x.map(b=>e.jsx("option",{value:b.id,children:b.label},b.id))})]}):e.jsxs("div",{children:[e.jsx("label",{children:"Papel:"}),e.jsx("input",{type:"text",value:x[0]?.label||"Aluno",disabled:!0}),e.jsx("input",{type:"hidden",name:"role_id",value:x[0]?.id||2})]}),e.jsx("button",{type:"submit",disabled:d,style:{marginTop:16},children:d?"Cadastrando...":"Cadastrar"})]})}function br(){const{token:t,user:o}=N(),[s,r]=l.useState(""),[a,n]=l.useState([]),[i,d]=l.useState(!1),[c,h]=l.useState(null),[p,u]=l.useState(null),[x,y]=l.useState(!1),[S,b]=l.useState(""),[g,m]=l.useState(!1),[v,k]=l.useState({open:!1,user:null,action:null}),A=l.useRef();if(o?.role_id===2)return e.jsxs("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#fff3cd",margin:"20px",borderRadius:"12px",border:"1px solid #ffeaa7"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:"🚫"}),e.jsx("h2",{style:{color:"#856404",margin:"0 0 10px 0"},children:"Acesso Negado"}),e.jsx("p",{style:{color:"#856404",margin:0},children:"Você não tem permissão para acessar esta página."})]});async function E(f){if(!f.trim()){n([]);return}try{y(!0);let z=[];o?.role_id===1?z=await J.getAllUsers(t,f):o?.role_id===3&&(z=await J.getStudents(t,f)),n(Array.isArray(z)?z:[])}catch(z){console.error("Erro ao buscar usuários:",z),n([])}finally{y(!1)}}function T(f){const z=f.target.value;if(r(z),d(!!z),!z.trim()){n([]),h(null);return}clearTimeout(A.current),A.current=setTimeout(()=>{E(z)},400)}function F(f){h(f),u({...f}),d(!1),r(f.nome)}function j(f,z){u(G=>({...G,[f]:z}))}async function W(){if(p)try{y(!0);const{nova_senha:f,...z}=p;if(await J.updateUser(t,p.id,z),f&&f.trim())try{await J.updatePassword(t,p.id,f),b("Usuário e senha atualizados com sucesso!")}catch(G){console.error("Erro ao atualizar senha:",G),b("Usuário atualizado, mas houve erro ao alterar a senha.")}else b("Usuário atualizado com sucesso!");h({...z}),setTimeout(()=>b(""),3e3)}catch(f){console.error("Erro ao atualizar usuário:",f),b("Erro ao atualizar usuário."),setTimeout(()=>b(""),3e3)}finally{y(!1)}}async function R(f){try{y(!0),await J.deleteUser(t,f.id),b(`Usuário ${f.nome} inativado com sucesso!`),h(z=>({...z,ativo:!1})),u(z=>({...z,ativo:!1})),setTimeout(()=>b(""),3e3)}catch(z){console.error("Erro ao inativar usuário:",z),b("Erro ao inativar usuário."),setTimeout(()=>b(""),3e3)}finally{y(!1)}}async function P(f){try{y(!0),await J.reactivateUser(t,f.id),b(`Usuário ${f.nome} reativado com sucesso!`),h(z=>({...z,ativo:!0})),u(z=>({...z,ativo:!0})),setTimeout(()=>b(""),3e3)}catch(z){console.error("Erro ao reativar usuário:",z),b("Erro ao reativar usuário."),setTimeout(()=>b(""),3e3)}finally{y(!1)}}function B(){r(""),h(null),u(null),n([]),d(!1)}return e.jsxs("div",{style:{padding:"30px"},children:[te(o,["Admin","Professor"])&&e.jsx("div",{style:{marginBottom:"25px"},children:e.jsx(H,{variant:g?"danger":"success",onClick:()=>m(!g),style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"bold"},children:g?"❌ Cancelar":"➕ Criar Novo Usuário"})}),g&&e.jsx("div",{style:{marginBottom:"30px",padding:"25px",backgroundColor:"#f8f9fa",border:"2px solid #e9ecef",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:e.jsx(mr,{onCreated:()=>m(!1)})}),e.jsxs("div",{style:{marginBottom:"25px",position:"relative",maxWidth:"500px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",fontSize:"1rem",color:"#333"},children:["🔍 Buscar ",o?.role_id===3?"Aluno":"Usuário",":"]}),e.jsx("input",{type:"text",placeholder:`Digite o nome do ${o?.role_id===3?"aluno":"usuário"} para buscar...`,value:s,onChange:T,onFocus:()=>d(!!s),onBlur:()=>setTimeout(()=>d(!1),200),style:{width:"100%",padding:"15px 50px 15px 20px",border:"2px solid #e9ecef",borderRadius:"25px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocusCapture:f=>f.target.style.borderColor="#007bff",onBlurCapture:f=>f.target.style.borderColor="#e9ecef"}),e.jsx("span",{style:{position:"absolute",right:"20px",top:"45px",color:"#999",fontSize:"1.2rem"},children:"🔍"}),i&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"2px solid #e9ecef",borderTop:"none",borderRadius:"0 0 12px 12px",maxHeight:"300px",overflowY:"auto",zIndex:1e3,boxShadow:"0 8px 16px rgba(0,0,0,0.1)"},children:[x&&e.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontSize:"1rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"🔄"}),e.jsx("br",{}),"Buscando..."]}),!x&&a.length===0&&s&&e.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#666",fontSize:"1rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"❌"}),e.jsx("br",{}),"Nenhum usuário encontrado"]}),!x&&a.map(f=>e.jsxs("div",{onClick:()=>F(f),style:{padding:"15px 20px",cursor:"pointer",borderBottom:"1px solid #eee",transition:"background-color 0.3s ease"},onMouseEnter:z=>z.target.style.backgroundColor="#f8f9fa",onMouseLeave:z=>z.target.style.backgroundColor="white",children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"1rem",color:"#333",marginBottom:"4px"},children:f.nome}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"4px"},children:f.email}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#999",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:f.role_id===1?"👑 Admin":f.role_id===2?"🎓 Aluno":"👨‍🏫 Professor"}),f.ativo===!1&&e.jsx("span",{style:{color:"#dc3545",fontWeight:"bold",fontSize:"0.75rem"},children:"❌ Inativo"})]})]},f.id))]})]}),c&&p&&e.jsxs("div",{style:{marginTop:"30px",padding:"30px",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",border:"2px solid #007bff",borderRadius:"12px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px",paddingBottom:"15px",borderBottom:"2px solid #e9ecef"},children:[e.jsxs("h3",{style:{margin:0,color:"#001F3F",fontSize:"1.4rem",fontWeight:"bold"},children:["✏️ Editando: ",c.nome]}),e.jsx("button",{onClick:B,style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:f=>{f.target.style.backgroundColor="#c82333",f.target.style.transform="translateY(-1px)"},onMouseLeave:f=>{f.target.style.backgroundColor="#dc3545",f.target.style.transform="translateY(0)"},children:"❌ Fechar"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"25px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"0.9rem"},children:"👤 Nome:"}),e.jsx("input",{type:"text",value:p.nome||"",onChange:f=>j("nome",f.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:f=>f.target.style.borderColor="#007bff",onBlur:f=>f.target.style.borderColor="#e9ecef"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"0.9rem"},children:"📧 Email:"}),e.jsx("input",{type:"email",value:p.email||"",onChange:f=>j("email",f.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:f=>f.target.style.borderColor="#007bff",onBlur:f=>f.target.style.borderColor="#e9ecef"})]}),o?.role_id===1&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"0.9rem"},children:"🎓 Papel:"}),e.jsxs("select",{value:p.role_id||"",onChange:f=>j("role_id",parseInt(f.target.value)),style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box",backgroundColor:"white"},onFocus:f=>f.target.style.borderColor="#007bff",onBlur:f=>f.target.style.borderColor="#e9ecef",children:[e.jsx("option",{value:1,children:"👑 Admin"}),e.jsx("option",{value:2,children:"🎓 Aluno"}),e.jsx("option",{value:3,children:"👨‍🏫 Professor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"0.9rem"},children:"📞 Telefone:"}),e.jsx("input",{type:"text",value:p.telefone||"",onChange:f=>j("telefone",f.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:f=>f.target.style.borderColor="#007bff",onBlur:f=>f.target.style.borderColor="#e9ecef",placeholder:"(xx) xxxxx-xxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"0.9rem"},children:"🔒 Nova Senha:"}),e.jsx("input",{type:"password",value:p.nova_senha||"",onChange:f=>j("nova_senha",f.target.value),placeholder:"Deixe em branco para não alterar",style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box"},onFocus:f=>f.target.style.borderColor="#007bff",onBlur:f=>f.target.style.borderColor="#e9ecef"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#333",fontSize:"0.9rem"},children:"📊 Status:"}),e.jsx("div",{style:{padding:"12px 16px",borderRadius:"8px",backgroundColor:p.ativo!==!1?"#d4edda":"#f8d7da",color:p.ativo!==!1?"#155724":"#721c24",fontWeight:"bold",border:`2px solid ${p.ativo!==!1?"#c3e6cb":"#f5c6cb"}`,fontSize:"1rem"},children:p.ativo!==!1?"✅ Ativo":"❌ Inativo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",marginTop:"25px",paddingTop:"20px",borderTop:"2px solid #e9ecef"},children:[e.jsx("button",{onClick:W,disabled:x,style:{padding:"12px 24px",backgroundColor:x?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:x?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:f=>{x||(f.target.style.backgroundColor="#218838",f.target.style.transform="translateY(-2px)")},onMouseLeave:f=>{x||(f.target.style.backgroundColor="#28a745",f.target.style.transform="translateY(0)")},children:x?"⏳ Salvando...":"💾 Salvar Alterações"}),p.ativo!==!1?e.jsx("button",{onClick:()=>k({open:!0,user:p,action:"delete"}),style:{padding:"12px 24px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:f=>{f.target.style.backgroundColor="#c82333",f.target.style.transform="translateY(-2px)"},onMouseLeave:f=>{f.target.style.backgroundColor="#dc3545",f.target.style.transform="translateY(0)"},children:"🚫 Inativar Usuário"}):e.jsx("button",{onClick:()=>k({open:!0,user:p,action:"reactivate"}),style:{padding:"12px 24px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:f=>{f.target.style.backgroundColor="#138496",f.target.style.transform="translateY(-2px)"},onMouseLeave:f=>{f.target.style.backgroundColor="#17a2b8",f.target.style.transform="translateY(0)"},children:"✅ Reativar Usuário"}),e.jsx("button",{onClick:B,style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},onMouseEnter:f=>{f.target.style.backgroundColor="#5a6268",f.target.style.transform="translateY(-2px)"},onMouseLeave:f=>{f.target.style.backgroundColor="#6c757d",f.target.style.transform="translateY(0)"},children:"❌ Cancelar"})]})]}),S&&e.jsxs("div",{style:{marginTop:"25px",padding:"15px 20px",backgroundColor:S.includes("Erro")?"#f8d7da":"#d4edda",color:S.includes("Erro")?"#721c24":"#155724",border:`2px solid ${S.includes("Erro")?"#f5c6cb":"#c3e6cb"}`,borderRadius:"12px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[S.includes("Erro")?"❌":"✅"," ",S]}),v.open&&e.jsx(gr,{open:v.open,title:v.action==="delete"?"🚫 Inativar usuário?":"✅ Reativar usuário?",message:`Tem certeza que deseja ${v.action==="delete"?"inativar":"reativar"} o usuário ${v.user.nome}?`,onCancel:()=>k({open:!1,user:null,action:null}),onConfirm:async()=>{v.action==="delete"?await R(v.user):v.action==="reactivate"&&await P(v.user),k({open:!1,user:null,action:null})}})]})}function yr(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#343a40"},children:"👥 Gerenciamento de Usuários"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Gerencie usuários do sistema"})]}),e.jsx(br,{})]})}function vr(){const{id:t}=ae(),{token:o}=N(),[s,r]=l.useState(null),[a,n]=l.useState(!0);return l.useEffect(()=>{async function i(){try{const d=await C(`/api/usuarios/${t}`,{token:o});r(d)}catch{r(null)}n(!1)}i()},[t,o]),a?e.jsx("div",{children:"Carregando usuário..."}):s?e.jsxs("div",{children:[e.jsx("h2",{children:"Detalhes do Usuário"}),e.jsxs("div",{children:[e.jsx("b",{children:"Nome:"})," ",s.nome]}),e.jsxs("div",{children:[e.jsx("b",{children:"Email:"})," ",s.email]}),e.jsxs("div",{children:[e.jsx("b",{children:"Papel:"})," ",s.role]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",s.ativo?"Ativo":"Inativo"]}),e.jsxs("div",{style:{marginTop:16},children:[e.jsx(ke,{to:"/usuarios",children:"Voltar"})," | ",e.jsx(ke,{to:`/usuarios/${s.id}/editar`,children:"Editar"})]})]}):e.jsx("div",{children:"Usuário não encontrado."})}function jr(){return e.jsx("div",{style:{maxWidth:500,margin:"auto",paddingTop:40},children:e.jsx(vr,{})})}const Je=t=>t?typeof t.role=="string"?t.role:t.role&&typeof t.role=="object"?t.role.nome||t.role.name||null:t.role_id===1?"Admin":t.role_id===2?"Aluno":t.role_id===3?"Professor":null:null;function Sr(){const{id:t}=ae(),{token:o,user:s}=N(),r=D(),[a,n]=l.useState({nome:"",email:"",role_id:2,ativo:!0}),[i,d]=l.useState(""),[c,h]=l.useState(!0);l.useEffect(()=>{async function y(){try{const S=await C(`/api/usuarios/${t}`,{token:o});n({nome:S.nome,email:S.email,role_id:S.role_id,ativo:S.ativo})}catch{}h(!1)}y()},[t,o]);const p=y=>{const{name:S,value:b,type:g,checked:m}=y.target;n(v=>({...v,[S]:g==="checkbox"?m:b}))},u=async y=>{y.preventDefault(),d("");try{await C(`/api/usuarios/${t}`,{method:"PUT",token:o,body:a}),d("Usuário atualizado!"),setTimeout(()=>r(`/usuarios/${t}`),1e3)}catch(S){d(S.message||"Erro ao atualizar usuário.")}};if(c)return e.jsx("div",{children:"Carregando..."});const x=Je(s)==="Admin"?[{id:2,label:"Aluno"},{id:3,label:"Professor"},{id:1,label:"Administrador"}]:[{id:2,label:"Aluno"},{id:3,label:"Professor"}];return e.jsxs("form",{onSubmit:u,children:[e.jsx("h2",{children:"Editar Usuário"}),i&&e.jsx("div",{children:i}),e.jsxs("div",{children:[e.jsx("label",{children:"Nome:"}),e.jsx("input",{name:"nome",value:a.nome,onChange:p,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{name:"email",value:a.email,onChange:p,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Papel:"}),e.jsx("select",{name:"role_id",value:a.role_id,onChange:p,disabled:Je(s)!=="Admin",children:x.map(y=>e.jsx("option",{value:y.id,children:y.label},y.id))})]}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"ativo",checked:a.ativo,onChange:p}),"Ativo"]})}),e.jsx("button",{type:"submit",children:"Salvar"})]})}function Cr(){return e.jsx("div",{style:{maxWidth:500,margin:"auto",paddingTop:40},children:e.jsx(Sr,{})})}function wr({processoId:t,onUpload:o}){const{token:s,user:r}=N(),[a,n]=l.useState(""),[i,d]=l.useState(!1),c=l.useRef(),h=async p=>{p.preventDefault(),n(""),d(!0);const u=c.current.files[0];if(!u){n("Selecione um arquivo."),d(!1);return}const x=new FormData;x.append("nome",u.name),x.append("arquivo",u),x.append("processo_id",t),x.append("usuario_id",r.id);try{await ue.uploadFile(x,s),n("Arquivo enviado com sucesso!"),c.current.value="",o&&o()}catch(y){n(y.message||"Erro ao enviar arquivo.")}d(!1)};return e.jsxs("form",{onSubmit:h,encType:"multipart/form-data",children:[e.jsx("h5",{children:"Anexar novo arquivo"}),a&&e.jsx("div",{children:a}),e.jsx("input",{type:"file",ref:c,required:!0}),e.jsx("button",{type:"submit",disabled:i,children:i?"Enviando...":"Enviar"})]})}function kr(){const{token:t,user:o}=N(),[s,r]=l.useState([]),[a,n]=l.useState(!0);return l.useEffect(()=>{async function i(){n(!0);try{const d=await ue.getUserFiles(t,o.id);r(d)}catch{r([])}n(!1)}o?.id&&i()},[t,o]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#343a40"},children:"📁 Meus Arquivos"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6c757d"},children:"Gerencie seus arquivos e documentos"})]}),e.jsx(wr,{onUpload:()=>window.location.reload()}),a?e.jsx("div",{children:"Carregando arquivos..."}):s.length===0?e.jsx("div",{children:"Nenhum arquivo encontrado."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nome"}),e.jsx("th",{children:"Data"}),e.jsx("th",{children:"Tamanho"}),e.jsx("th",{children:"Abrir"}),e.jsx("th",{children:"Excluir"})]})}),e.jsx("tbody",{children:s.map(i=>{const d=i.nome&&i.nome.length>30?i.nome.slice(0,15)+"..."+i.nome.slice(-10):i.nome;return e.jsxs("tr",{children:[e.jsx("td",{title:i.nome,children:d}),e.jsx("td",{children:i.criado_em?new Date(i.criado_em).toLocaleString():"-"}),e.jsx("td",{children:i.tamanho?`${Math.round(i.tamanho/1024)} KB`:"-"}),e.jsx("td",{children:e.jsx("button",{onClick:()=>window.open(me(i.caminho),"_blank"),children:"Abrir"})}),e.jsx("td",{children:e.jsx("button",{style:{background:"#d32f2f",color:"white",border:0,borderRadius:4,padding:"4px 10px",cursor:"pointer"},onClick:async()=>{if(window.confirm("Tem certeza que deseja excluir este arquivo?"))try{await ue.deleteFile(i.id,t),r(s.filter(c=>c.id!==i.id))}catch(c){alert("Erro ao excluir arquivo: "+(c.message||"Erro desconhecido"))}},children:"Excluir"})})]},i.id)})})]})]})}const Pr=({processoId:t=null})=>{const{userData:o}=N(),[s,r]=l.useState([]),[a,n]=l.useState(!1),[i,d]=l.useState(!1),[c,h]=l.useState(null),[p,u]=l.useState({tipo:"",status:"",data_inicio:"",data_fim:""}),[x,y]=l.useState({titulo:"",descricao:"",data_evento:"",tipo:"audiencia",processo_id:t||"",local_evento:"",lembrete_1_dia:!0,lembrete_2_dias:!0,lembrete_1_semana:!1,status:"agendado"}),S=[{value:"audiencia",label:"Audiência"},{value:"prazo",label:"Prazo"},{value:"reuniao",label:"Reunião"},{value:"evento",label:"Evento"},{value:"outros",label:"Outros"}],b=[{value:"agendado",label:"Agendado"},{value:"realizado",label:"Realizado"},{value:"cancelado",label:"Cancelado"},{value:"adiado",label:"Adiado"}];l.useEffect(()=>{g()},[t,p]);const g=async()=>{if(!(!o||!o.token)){n(!0);try{const j=await ce.listAgendamentos(o.token);r(j)}catch(j){console.error("Erro ao carregar agendamentos:",j)}finally{n(!1)}}},m=async j=>{if(j.preventDefault(),!(!o||!o.token))try{c?await ce.updateAgendamento(o.token,c,x):await ce.createAgendamento(o.token,x),d(!1),h(null),A(),g()}catch(W){console.error("Erro ao salvar agendamento:",W)}},v=j=>{y({...j,data_evento:new Date(j.data_evento).toISOString().slice(0,16)}),h(j.id),d(!0)},k=async j=>{if(!(!o||!o.token)&&window.confirm("Tem certeza que deseja excluir este agendamento?"))try{await ce.deleteAgendamento(o.token,j),g()}catch(W){console.error("Erro ao excluir agendamento:",W)}},A=()=>{y({titulo:"",descricao:"",data_evento:"",tipo:"audiencia",processo_id:t||"",local_evento:"",lembrete_1_dia:!0,lembrete_2_dias:!0,lembrete_1_semana:!1,status:"agendado"})},E=j=>new Date(j).toLocaleString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),T=j=>({agendado:"bg-blue-100 text-blue-800",realizado:"bg-green-100 text-green-800",cancelado:"bg-red-100 text-red-800",adiado:"bg-yellow-100 text-yellow-800"})[j]||"bg-gray-100 text-gray-800",F=j=>({audiencia:"⚖️",prazo:"⏰",reuniao:"👥",evento:"📋",outros:"📅"})[j]||"📅";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:"📅"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Agendamentos"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Agendamentos do Processo":"Meus Agendamentos"}),e.jsx("button",{onClick:()=>{d(!0),h(null),A()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"+ Novo Agendamento"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("select",{value:p.tipo,onChange:j=>u({...p,tipo:j.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),S.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]}),e.jsxs("select",{value:p.status,onChange:j=>u({...p,status:j.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Todos os status"}),b.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]}),e.jsx("input",{type:"date",value:p.data_inicio,onChange:j=>u({...p,data_inicio:j.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2",placeholder:"Data início"}),e.jsx("input",{type:"date",value:p.data_fim,onChange:j=>u({...p,data_fim:j.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2",placeholder:"Data fim"})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:c?"Editar Agendamento":"Novo Agendamento"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),e.jsx("input",{type:"text",required:!0,value:x.titulo,onChange:j=>y({...x,titulo:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento *"}),e.jsx("select",{required:!0,value:x.tipo,onChange:j=>y({...x,tipo:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:S.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data e Hora *"}),e.jsx("input",{type:"datetime-local",required:!0,value:x.data_evento,onChange:j=>y({...x,data_evento:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{value:x.status,onChange:j=>y({...x,status:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:b.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local"}),e.jsx("input",{type:"text",value:x.local_evento,onChange:j=>y({...x,local_evento:j.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:x.descricao,onChange:j=>y({...x,descricao:j.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Configurar Lembretes Automáticos"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-3",children:[e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"📧 O sistema enviará lembretes automáticos por email nos períodos selecionados antes do evento:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center p-2 bg-white rounded border hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:x.lembrete_1_semana,onChange:j=>y({...x,lembrete_1_semana:j.target.checked}),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"📅 1 semana antes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lembrete enviado 7 dias antes do evento"})]})]}),e.jsxs("label",{className:"flex items-center p-2 bg-white rounded border hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:x.lembrete_2_dias,onChange:j=>y({...x,lembrete_2_dias:j.target.checked}),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"⏰ 2 dias antes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lembrete enviado 48 horas antes do evento"})]})]}),e.jsxs("label",{className:"flex items-center p-2 bg-white rounded border hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:x.lembrete_1_dia,onChange:j=>y({...x,lembrete_1_dia:j.target.checked}),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"🔔 1 dia antes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lembrete enviado 24 horas antes do evento"})]})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:["💡 ",e.jsx("strong",{children:"Dica:"})," Para audiências importantes, recomendamos ativar todos os lembretes. Para prazos rotineiros, apenas 1-2 dias pode ser suficiente."]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),h(null),A()},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:c?"Atualizar":"Criar"})]})]})]})}),a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2",children:"Carregando agendamentos..."})]}):s.length===0?e.jsx("div",{className:"text-center py-8 bg-white rounded-lg shadow",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum agendamento encontrado"})}):e.jsx("div",{className:"space-y-4",children:s.map(j=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:F(j.tipo)}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.titulo}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(j.status)}`,children:b.find(W=>W.value===j.status)?.label})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["📅 ",E(j.data_evento)]}),j.local&&e.jsxs("p",{children:["📍 ",j.local]}),j.processo&&e.jsxs("p",{children:["📋 Processo: ",j.processo.numero_processo]}),j.descricao&&e.jsx("p",{className:"mt-2",children:j.descricao})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[j.lembrete_1_semana&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"� 1 semana"}),j.lembrete_2_dias&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"⏰ 2 dias"}),j.lembrete_1_dia&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"🔔 1 dia"}),!j.lembrete_1_dia&&!j.lembrete_2_dias&&!j.lembrete_1_semana&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"🔕 Sem lembretes"})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>v(j),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:"✏️"}),e.jsx("button",{onClick:()=>k(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Excluir",children:"🗑️"})]})]})},j.id))})]})},Ar=()=>e.jsx(Pr,{});function q({children:t,roles:o}){const{isAuthenticated:s,user:r,loading:a}=N();return a?e.jsx("div",{children:"Carregando..."}):s?o&&!dt(r,o)?e.jsx(We,{to:"/",replace:!0}):e.jsx(Eo,{children:t}):e.jsx(We,{to:"/",replace:!0})}function zr(){return e.jsx(So,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(ho,{children:[e.jsx(M,{path:"/",element:e.jsx(Jo,{})}),e.jsx(M,{path:"/login",element:e.jsx(Ro,{})}),e.jsx(M,{path:"/register",element:e.jsx($e,{})}),e.jsx(M,{path:"/registrar",element:e.jsx($e,{})}),e.jsx(M,{path:"/registrar-completo",element:e.jsx(Bo,{})}),e.jsx(M,{path:"/esqueci-senha",element:e.jsx(Ko,{})}),e.jsx(M,{path:"/resetar-senha",element:e.jsx(Qo,{})}),e.jsx(M,{path:"/dashboard",element:e.jsx(q,{children:e.jsx(Oo,{})})}),e.jsx(M,{path:"/perfil",element:e.jsx(q,{children:e.jsx(Oe,{})})}),e.jsx(M,{path:"/profile",element:e.jsx(q,{children:e.jsx(Oe,{})})}),e.jsx(M,{path:"/arquivos",element:e.jsx(q,{children:e.jsx(kr,{})})}),e.jsx(M,{path:"/agendamentos",element:e.jsx(q,{children:e.jsx(Ar,{})})}),e.jsx(M,{path:"/usuarios",element:e.jsx(q,{roles:["Professor","Admin"],children:e.jsx(yr,{})})}),e.jsx(M,{path:"/usuarios/:id",element:e.jsx(q,{roles:["Professor","Admin"],children:e.jsx(jr,{})})}),e.jsx(M,{path:"/usuarios/:id/editar",element:e.jsx(q,{roles:["Professor","Admin"],children:e.jsx(Cr,{})})}),e.jsx(M,{path:"/processos",element:e.jsx(q,{children:e.jsx(or,{})})}),e.jsx(M,{path:"/processos/:id",element:e.jsx(q,{children:e.jsx(lr,{})})}),e.jsx(M,{path:"/processos/:id/atualizacoes",element:e.jsx(q,{children:e.jsx(hr,{})})}),e.jsx(M,{path:"/processos/:id/editar",element:e.jsx(q,{children:e.jsx(ur,{})})}),e.jsx(M,{path:"/processos/novo",element:e.jsx(q,{roles:["Professor","admin"],children:e.jsx(cr,{})})}),e.jsx(M,{path:"/processos/:id/atribuir",element:e.jsx(q,{roles:["Professor","Admin"],children:e.jsx(xr,{})})}),e.jsx(M,{path:"*",element:e.jsx("div",{children:"Página não encontrada"})})]})})}const Er=new gt({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*10,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:(t,o)=>o?.message?.includes("401")?!1:t<2,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{throwOnError:!0}}});function Tr(){return e.jsx(ft,{client:Er,children:e.jsxs(St,{children:[e.jsx(zr,{}),!1]})})}vt.createRoot(document.getElementById("root")).render(e.jsx(Ye.StrictMode,{children:e.jsx(Tr,{})}));
